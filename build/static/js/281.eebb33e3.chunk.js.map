{"version":3,"file":"static/js/281.eebb33e3.chunk.js","mappings":"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","sources":["components/Timing2.js","pages/Proximity.js","../node_modules/react-leaflet/lib/GeoJSON.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { removeGareDePrefix } from '../utils/stringUtils';\r\nimport { set } from 'date-fns';\r\nimport relations from '../data/relations.json';\r\nimport zonesDarrets from '../data/zones-d-arrets.json';\r\nimport referentielDesLignes from '../data/referentiel-des-lignes.json';\r\nimport LineSVG from './tools/createLineLogo';\r\n\r\nfunction TrainInfo({ lineID, stationName }) {\r\n\r\n  // Fetch train departure every 2 seconds\r\n  const [trainData, setTrainData] = useState([]);\r\n  const [status, setStatus] = useState('');\r\n\r\n  const calculateMinutesFromNow = (time) => {\r\n    return Math.round((new Date(time) - new Date()) / 60000);\r\n  };\r\n\r\n  const url = `https://prim.iledefrance-mobilites.fr/marketplace/stop-monitoring?MonitoringRef=STIF:StopArea:SP:${stationName}:`;\r\n  useEffect(() => {\r\n    const fetchData = (url, setData, setStatus) => {\r\n      fetch(url, {\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'apikey': process.env.REACT_APP_IDFM_API_KEY\r\n        }\r\n      })\r\n      .then(response => response.status === 404 ? null : response.json())\r\n      .then(data => {\r\n        const departures = data?.Siri?.ServiceDelivery?.StopMonitoringDelivery[0]?.MonitoredStopVisit?.map(journey => ({\r\n          lineRef: journey?.MonitoredVehicleJourney?.LineRef?.value,\r\n          operatorRef: journey?.MonitoredVehicleJourney?.OperatorRef?.value,\r\n          directionName: journey?.MonitoredVehicleJourney?.DirectionName[0]?.value,\r\n          destinationName: journey?.MonitoredVehicleJourney?.DestinationName[0]?.value,\r\n          vehicleJourneyName: journey?.MonitoredVehicleJourney?.VehicleJourneyName[0]?.value,\r\n          expectedArrivalTime: journey?.MonitoredVehicleJourney?.MonitoredCall?.ExpectedArrivalTime,\r\n          aimedArrival: journey?.MonitoredVehicleJourney?.MonitoredCall?.AimedArrival,\r\n          expectedDepartureTime: journey?.MonitoredVehicleJourney?.MonitoredCall?.ExpectedDepartureTime,\r\n          aimedDepartureTime: journey?.MonitoredVehicleJourney?.MonitoredCall?.aimedDepartureTime,\r\n          arrivalStatus: journey?.MonitoredVehicleJourney?.MonitoredCall?.ArrivalStatus,\r\n          departureStatus: journey?.MonitoredVehicleJourney?.MonitoredCall?.DepartureStatus,\r\n          vehicleAtStop: journey?.MonitoredVehicleJourney?.MonitoredCall?.VehicleAtStop,\r\n          minutesFromNow: calculateMinutesFromNow(journey?.MonitoredVehicleJourney?.MonitoredCall?.ExpectedDepartureTime || journey?.MonitoredVehicleJourney?.MonitoredCall?.ExpectedArrivalTime),\r\n        }));\r\n        \r\n        setData(departures.sort((a, b) => a.minutesFromNow - b.minutesFromNow));\r\n        setStatus(data.nextDepartures.errorMessage);\r\n      })\r\n      .catch(error => console.error(error));\r\n    };\r\n\r\n    fetchData(url, setTrainData, setStatus);\r\n    const intervalId = setInterval(() => fetchData(url, setTrainData, setStatus), 2000);\r\n    return () => clearInterval(intervalId);\r\n  }, [stationName]);\r\n\r\n  function getLighterColor(lineID) {\r\n    var lineColor = referentielDesLignes.find(line => line.fields.id_line == lineID)?.fields.colourweb_hexa;\r\n\r\n    function blendColor(color, blendWith, alpha) {\r\n      const [r1, g1, b1] = [parseInt(color.slice(0, 2), 16), parseInt(color.slice(2, 4), 16), parseInt(color.slice(4, 6), 16)];\r\n      const [r2, g2, b2] = [parseInt(blendWith.slice(0, 2), 16), parseInt(blendWith.slice(2, 4), 16), parseInt(blendWith.slice(4, 6), 16)];\r\n\r\n      const r = Math.round(r1 * (1 - alpha) + r2 * alpha);\r\n      const g = Math.round(g1 * (1 - alpha) + g2 * alpha);\r\n      const b = Math.round(b1 * (1 - alpha) + b2 * alpha);\r\n\r\n      return ((r << 16) + (g << 8) + b).toString(16).padStart(6, '0');\r\n    }\r\n\r\n    return blendColor(lineColor, 'ffffff', 0.5);\r\n  }\r\n\r\n\r\n  if (status === 'NO_REALTIME_SCHEDULES_FOUND') {\r\n    return <div className=\"flex items-center justify-center text-center text-xs lg:text-base bg-white dark:bg-gray-700 dark:text-gray-200 rounded-lg shadow-md p-4 mb-3 h-[44px] lg:h-[72px]\"><p className='animate-pulse'>Information en direct indisponible</p></div>;\r\n  }\r\n\r\n  // Display loading animation\r\n  if (trainData.length === 0) {\r\n    return (\r\n      <div className=\"overflow-y-auto max-h-[27rem] animate-pulse\">\r\n        <div className=\"flex items-center bg-white dark:bg-gray-800 rounded-lg shadow-md h-[44px] lg:h-[72px]\">\r\n          <div role=\"status\" class=\"flex items-center justify-center w-4 lg:w-10 h-4 lg:h-10 ml-1 lg:ml-0 mr-2 lg:mr-4 p-1 bg-gray-300 rounded-sm lg:rounded-lg dark:bg-gray-700\">\r\n            <svg class=\"w-5 h-5 text-gray-200 dark:text-gray-600\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 20 18\">\r\n              <path d=\"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z\" />\r\n            </svg>\r\n          </div>\r\n\r\n          <div className=\"flex-grow\">\r\n            <div class=\"w-12 lg:w-24 h-1 lg:h-2.5 mb-1 lg:mb-2.5 bg-gray-300 rounded-full dark:bg-gray-600\"></div>\r\n            <div class=\"w-16 lg:w-32 h-1 lg:h-2 bg-gray-200 rounded-full dark:bg-gray-700\"></div>\r\n          </div>\r\n\r\n          <div className=\"ml-2 lg:ml-5 min-w-max pr-2 text-right\">\r\n            <div class=\"w-6 lg:w-12 h-1 lg:h-2.5 mb-1 lg:mb-2.5 mr-1 bg-gray-300 rounded-full dark:bg-gray-700\"></div>\r\n            <div class=\"w-4 lg:w-8 h-1 lg:h-2 mr-1 bg-gray-200 rounded-full float-right dark:bg-gray-700\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Group train departures by line direction\r\n  const groupedTrainData = trainData.reduce((acc, train) => {\r\n    const lineDirection = removeGareDePrefix(train.lineDirection);\r\n    if (!acc[lineDirection]) {\r\n      acc[lineDirection] = [];\r\n    }\r\n    acc[lineDirection].push(train);\r\n    return acc;\r\n  }, {});\r\n\r\n  // Display train departures grouped by line direction\r\n  return (\r\n    <div className=\"\">\r\n      {trainData.map((train, index) => (\r\n        <div \r\n          key={index} \r\n          className=\"flex items-center bg-white border-gray-400 dark:text-white dark:bg-gray-700 min-h-[44px] max-h-[72px] p-1 lg:p-4 relative\" \r\n          style={{borderBottom: `4px solid #${getLighterColor(train.lineRef.replace(/:$/, '').split(':').pop())}`}} // Replace lineColor with your desired color\r\n        >\r\n          <div className='shrink-0'>\r\n            {/* <img \r\n              src={process.env.PUBLIC_URL + `/images/${train.lineRef.replace(/:$/, '').split(':').pop()}.svg`} \r\n              alt={train.lineRef.replace(/:$/, '').split(':').pop()} \r\n              className=\"h-4 lg:h-10 pl-1 lg:pl-0 mr-2 lg:mr-4\" \r\n            /> */}\r\n            <LineSVG lineID={train.lineRef.replace(/:$/, '').split(':').pop()} className=\"h-6 lg:h-10 pl-1 lg:pl-0 mr-2 lg:mr-4\" />\r\n            <h3 className='text-[8px] lg:text-xs justify-center flex mx-auto mt-0.5 pl-0.5 lg:pl-0'>{train.vehicleJourneyName}</h3>\r\n          </div>\r\n          <div className=\"flex-grow overflow-hidden\">\r\n            <h2 className='font-bold text-[11px] lg:text-lg line-clamp-2 ml-2 lg:ml-4'>{train.destinationName} - {train.aimedArrival} - {train.vehicleAtStop}</h2>\r\n          </div>\r\n          <div className=\"ml-1 lg:ml-5 pr-2 text-right\">\r\n            <p className=\"text-sm lg:text-2xl font-bold\">{train.departureStatus} {train.minutesFromNow}ᵐⁱⁿ</p>\r\n            <p className=\"text-xs lg:text-sm text-right text-gray-400 dark:text-white\">Arrival: {new Date(train.expectedArrivalTime).toLocaleTimeString()}</p>\r\n            <p className=\"text-xs lg:text-sm text-right text-gray-400 dark:text-white\">Departure: {new Date(train.expectedDepartureTime).toLocaleTimeString()}</p>\r\n          </div>\r\n          <div \r\n            className=\"absolute top-0 right-0 bottom-0 left-0 lg:left-0 bg-gradient-to-r from-transparent to-white dark:to-gray-700\"\r\n            style={{\r\n              backgroundImage: `linear-gradient(to right, transparent, rgba(${parseInt(getLighterColor(train.lineRef.replace(/:$/, '').split(':').pop()).slice(0, 2), 16)}, ${parseInt(getLighterColor(train.lineRef.replace(/:$/, '').split(':').pop()).slice(2, 4), 16)}, ${parseInt(getLighterColor(train.lineRef.replace(/:$/, '').split(':').pop()).slice(4, 6), 16)}, 0.1))`\r\n            }}\r\n          />\r\n        </div>\r\n      ))}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TrainInfo;","import React, { useState, useEffect, useRef } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents, useMap } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport TrainInfo from '../components/Timing2';\r\nimport tracesDuReseauFerre from '../data/traces-du-reseau-ferre-idf.json';\r\nimport { GeoJSON } from 'react-leaflet';\r\nimport arretsLignes from '../data/arrets-lignes.json';\r\n\r\nconst Location = () => {\r\n    const [initialPosition, setInitialPosition] = useState(null);\r\n    const [stopAreas, setStopAreas] = useState('');\r\n    const mapRef = useRef();\r\n\r\n    const CenterMarker = () => {\r\n        const [position, setPosition] = useState(null);\r\n        useMapEvents({\r\n            moveend: (e) => {\r\n                const newPos = e.target.getCenter();\r\n                setPosition(newPos);\r\n            }\r\n        });\r\n\r\n        useEffect(() => {\r\n            if (position) {\r\n                const fetchData = async () => {\r\n                    const response = await fetch(`https://prim.iledefrance-mobilites.fr/marketplace/navitia/coverage/fr-idf/coord/${position.lng};${position.lat}/stop_areas?distance=400`, {\r\n                        headers: {\r\n                            'apikey': process.env.REACT_APP_IDFM_API_KEY\r\n                        }\r\n                    });\r\n                    const data = await response.json();\r\n                    setStopAreas(data.stop_areas);\r\n                };\r\n                fetchData();\r\n            }\r\n        }, [position]);\r\n\r\n        return null;\r\n    };\r\n\r\n    const MiddleMarker = () => {\r\n        return (\r\n            <span className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[1000] bg-violet-700 rounded-full p-2 border-4 border-white\" />\r\n        )\r\n    };\r\n\r\n    useEffect(() => {\r\n        navigator.geolocation.getCurrentPosition((position) => {\r\n            setInitialPosition([position.coords.latitude, position.coords.longitude]);\r\n        }, (error) => {\r\n            console.error(\"Error occurred while getting geolocation: \", error);\r\n            if (!initialPosition) {\r\n                setInitialPosition([48.8598, 2.3470]);\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    const RecenterControl = () => {\r\n        const map = useMap();\r\n\r\n        useEffect(() => {\r\n            const control = new L.Control({ position: 'bottomright' });\r\n\r\n            control.onAdd = () => {\r\n                const button = L.DomUtil.create('button', 'leaflet-bar leaflet-control leaflet-control-custom');\r\n                button.innerHTML = '<svg class=\"w-4 h-4\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 14 20\"><path d=\"M7 0a7 7 0 0 0-1 13.92V19a1 1 0 1 0 2 0v-5.08A7 7 0 0 0 7 0Zm0 5.5A1.5 1.5 0 0 0 5.5 7a1 1 0 0 1-2 0A3.5 3.5 0 0 1 7 3.5a1 1 0 0 1 0 2Z\"/></svg>';\r\n                button.style.cssText = 'background-color: white; padding: 6px; cursor: pointer;';\r\n                button.onclick = () => initialPosition && map.flyTo(initialPosition, 13);\r\n                return button;\r\n            };\r\n\r\n            control.addTo(map);\r\n\r\n            return () => control.remove();\r\n        }, [map]);\r\n\r\n        return null;\r\n    };\r\n\r\n    return (\r\n        <div style={{ height: 'calc(100vh - 130px)' }}>\r\n            {initialPosition && (\r\n                <MapContainer className=\"h-[40%]\" whenCreated={setMapInstance => { mapRef.current = setMapInstance; }} center={initialPosition} zoom={13} attributionControl={false}>\r\n                    <TileLayer url={`https://{s}.tile.jawg.io/jawg-streets/{z}/{x}/{y}{r}.png?access-token=${process.env.REACT_APP_JAWG_API_KEY}`} />\r\n                    <CenterMarker />\r\n                    <RecenterControl />\r\n                    <MiddleMarker />\r\n                    {tracesDuReseauFerre.map((line, index) => (\r\n                        <GeoJSON key={index} data={line.geo_shape.geometry} style={{ color: '#' + line.colourweb_hexa }} />\r\n                    ))}\r\n                </MapContainer>\r\n            )}\r\n            {stopAreas && (\r\n                <div className=\"h-[60%] overflow-y-scroll\">\r\n                    {stopAreas.map((stopArea, index) => (\r\n                        <TrainInfo line={null} stationName={stopArea.id.split(':').pop()} />\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Location;","import { createElementObject, createPathComponent, extendContext } from '@react-leaflet/core';\nimport { GeoJSON as LeafletGeoJSON } from 'leaflet';\nexport const GeoJSON = createPathComponent(function createGeoJSON({ data , ...options }, ctx) {\n    const geoJSON = new LeafletGeoJSON(data, options);\n    return createElementObject(geoJSON, extendContext(ctx, {\n        overlayContainer: geoJSON\n    }));\n}, function updateGeoJSON(layer, props, prevProps) {\n    if (props.style !== prevProps.style) {\n        if (props.style == null) {\n            layer.resetStyle();\n        } else {\n            layer.setStyle(props.style);\n        }\n    }\n});\n"],"names":["_ref","lineID","stationName","_useState","useState","_useState2","_slicedToArray","trainData","setTrainData","_useState3","_useState4","status","setStatus","url","concat","getLighterColor","_referentielDesLignes","color","blendWith","alpha","_ref2","parseInt","slice","r1","g1","b1","_ref3","r2","g2","b2","Math","round","toString","padStart","blendColor","referentielDesLignes","find","line","fields","id_line","colourweb_hexa","useEffect","fetchData","setData","fetch","headers","process","then","response","json","data","_data$Siri","_data$Siri$ServiceDel","_data$Siri$ServiceDel2","_data$Siri$ServiceDel3","departures","Siri","ServiceDelivery","StopMonitoringDelivery","MonitoredStopVisit","map","journey","_journey$MonitoredVeh","_journey$MonitoredVeh2","_journey$MonitoredVeh3","_journey$MonitoredVeh4","_journey$MonitoredVeh5","_journey$MonitoredVeh6","_journey$MonitoredVeh7","_journey$MonitoredVeh8","_journey$MonitoredVeh9","_journey$MonitoredVeh10","_journey$MonitoredVeh11","_journey$MonitoredVeh12","_journey$MonitoredVeh13","_journey$MonitoredVeh14","_journey$MonitoredVeh15","_journey$MonitoredVeh16","_journey$MonitoredVeh17","_journey$MonitoredVeh18","_journey$MonitoredVeh19","_journey$MonitoredVeh20","_journey$MonitoredVeh21","_journey$MonitoredVeh22","_journey$MonitoredVeh23","_journey$MonitoredVeh24","_journey$MonitoredVeh25","_journey$MonitoredVeh26","_journey$MonitoredVeh27","_journey$MonitoredVeh28","time","lineRef","MonitoredVehicleJourney","LineRef","value","operatorRef","OperatorRef","directionName","DirectionName","destinationName","DestinationName","vehicleJourneyName","VehicleJourneyName","expectedArrivalTime","MonitoredCall","ExpectedArrivalTime","aimedArrival","AimedArrival","expectedDepartureTime","ExpectedDepartureTime","aimedDepartureTime","arrivalStatus","ArrivalStatus","departureStatus","DepartureStatus","vehicleAtStop","VehicleAtStop","minutesFromNow","Date","sort","a","b","nextDepartures","errorMessage","catch","error","console","intervalId","setInterval","clearInterval","_jsx","className","children","length","_jsxs","role","class","xmlns","fill","viewBox","d","reduce","acc","train","lineDirection","removeGareDePrefix","push","index","style","borderBottom","replace","split","pop","LineSVG","toLocaleTimeString","backgroundImage","initialPosition","setInitialPosition","stopAreas","setStopAreas","mapRef","useRef","CenterMarker","_useState5","_useState6","position","setPosition","useMapEvents","moveend","e","newPos","target","getCenter","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","lng","lat","sent","stop_areas","stop","apply","arguments","MiddleMarker","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","RecenterControl","useMap","control","L","onAdd","button","create","innerHTML","cssText","onclick","flyTo","addTo","remove","height","MapContainer","whenCreated","setMapInstance","current","center","zoom","attributionControl","TileLayer","tracesDuReseauFerre","GeoJSON","geo_shape","geometry","stopArea","TrainInfo","id","createPathComponent","ctx","options","_objectWithoutProperties","_excluded","geoJSON","LeafletGeoJSON","createElementObject","extendContext","overlayContainer","layer","props","prevProps","resetStyle","setStyle"],"sourceRoot":""}