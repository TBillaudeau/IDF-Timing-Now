"use strict";(self.webpackChunkrailtime_idf=self.webpackChunkrailtime_idf||[]).push([[515],{8171:function(e,r,t){var l=t(9867),i=t(5644),n=t(9790),a=t(2834);r.Z=function(e){var r=e.lineID,t=e.stationID,o=(0,l.useRef)(null);return(0,l.useEffect)((function(){var e=function(){var e=o.current.classList;e.toggle("flex-col",o.current.offsetWidth<=200),e.toggle("sm:flex-row",o.current.offsetWidth>200)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),(0,a.jsxs)("nav",{className:"flex sm:flex-row h-10 pl-4 bg-white dark:bg-gray-800 dark:text-white border-b border-gray-700 dark:border-gray-400",ref:o,"aria-label":"Breadcrumb",children:[(0,a.jsx)("ol",{className:"inline-flex items-center space-x-1 md:space-x-3 flex-none",children:r&&(0,a.jsx)("li",{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-3 h-3 text-gray-400 xl:mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:(0,a.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"})}),(0,a.jsx)(i.rU,{to:"/line/".concat(r),className:"mx-1 text-xs lg:text-sm font-medium hover:text-blue-600 md:ml-2",children:(0,n.Zd)(r)}),t&&(0,a.jsx)("svg",{className:"w-3 h-3 text-gray-400 xl:mx-1 mr-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:(0,a.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"})})]})})}),t&&(0,a.jsx)("ol",{className:"inline-flex items-center space-x-1 md:space-x-3 w-full sm:w-auto",children:(0,a.jsx)("li",{"aria-current":"page",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(i.rU,{to:"/station/".concat(t),className:"text-xs lg:text-sm font-medium text-gray-500 hover:text-blue-600 md:ml-2 line-clamp-1",children:(0,n.zj)(t)})})})})]})}},5236:function(e,r,t){t.d(r,{Z:function(){return m}});var l=t(4165),i=t(5861),n=t(9439),a=t(9867),o=t(4189),s=t(4670),d=t(2834),c=function(){var e=(0,a.useState)(!1),r=(0,n.Z)(e,2),t=r[0],l=r[1];return(0,d.jsx)("button",{onClick:function(){l(!t)},"aria-label":t?"Remove from favorites":"Add to favorites",children:t?(0,d.jsx)("svg",{class:"w-3 h-3 lg:w-5 lg:h-5 text-gray-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 14 20",children:(0,d.jsx)("path",{d:"M13 20a1 1 0 0 1-.64-.231L7 15.3l-5.36 4.469A1 1 0 0 1 0 19V2a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v17a1 1 0 0 1-1 1Z"})}):(0,d.jsx)("svg",{class:"w-3 h-3 lg:w-5 lg:h-5 text-gray-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 4 15",children:(0,d.jsx)("path",{d:"M3.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 6.041a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 5.959a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})})})},u=t(9790);var m=function(e){var r,t,m,x,g=e.lineID,v=e.stationID,h=(0,s.s0)(),p=(0,a.useState)([]),f=(0,n.Z)(p,2),w=f[0],b=f[1],y=(0,a.useState)(!1),j=(0,n.Z)(y,2),N=j[0],k=j[1];(0,a.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,l.Z)().mark((function e(){var r,t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.c)();case 2:r=e.sent,t=r.disruptedLines,b(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var M=w.some((function(e){return e.lineId==="line:IDFM:"+g&&!0===e.disrupted}));return(0,d.jsxs)("div",{className:"flex items-center bg-white dark:bg-gray-800 dark:text-white border-gray-900 dark:border-gray-800 border-solid border p-2 lg:p-4 mb-2 lg:mb-4 rounded-b-lg shadow-md min-h-[52px]",onMouseEnter:function(){return k(!0)},onMouseLeave:function(){return k(!1)},children:[M&&(0,d.jsxs)("span",{className:"relative",children:[N&&(0,d.jsxs)("div",{"data-popover":!0,id:"popover-top",role:"tooltip",className:"absolute z-10 inline-block w-40 lg:w-80 text-sm text-gray-500 transition-opacity duration-300 bg-white border border-gray-200 rounded-lg shadow-sm opacity-100 dark:text-gray-400 dark:border-gray-600 dark:bg-gray-800",children:[(0,d.jsx)("div",{className:"px-3 py-2 bg-gray-100 border-b border-gray-200 rounded-t-lg dark:border-gray-600 dark:bg-gray-700 flex flex-row",children:(0,d.jsx)("h3",{className:"flex-grow font-semibold text-gray-900 dark:text-white",children:null===(r=w.find((function(e){return e.lineId==="line:IDFM:"+g})))||void 0===r?void 0:r.disruption.cause})}),(0,d.jsxs)("div",{className:"px-3 py-2",children:[(0,d.jsx)("p",{children:null===(t=w.find((function(e){return e.lineId==="line:IDFM:"+g})))||void 0===t?void 0:t.disruption.title}),(0,d.jsxs)("a",{class:"bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 hover:dark:bg-gray-600 font-medium rounded-lg text-xs px-3 mt-3 text-center inline-flex items-center cursor-pointer",onClick:function(){h("/line/".concat(g))},children:[(0,d.jsx)("svg",{class:"-ml-0.5 mr-2 h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 14",children:(0,d.jsx)("path",{d:"M10 0C4.612 0 0 5.336 0 7c0 1.742 3.546 7 10 7 6.454 0 10-5.258 10-7 0-1.664-4.612-7-10-7Zm0 10a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z"})}),"En savoir plus"]})]})]}),(0,d.jsx)("span",{className:"absolute top-[-1rem] right-[-0.4rem] lg:top-[-1.8rem] lg:right-[-0.7rem]",children:(0,d.jsxs)("span",{className:"relative flex h-3 w-3 lg:h-5 lg:w-5",children:[(0,d.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full opacity-75 ".concat("BLOQUANTE"===(null===(m=w.find((function(e){return e.lineId==="line:IDFM:"+g})))||void 0===m?void 0:m.disruption.severity)?"bg-red-600":"bg-yellow-400")}),(0,d.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 lg:h-5 lg:w-5 ".concat("BLOQUANTE"===(null===(x=w.find((function(e){return e.lineId==="line:IDFM:"+g})))||void 0===x?void 0:x.disruption.severity)?"bg-red-600":"bg-yellow-400")})]})})]}),(0,d.jsx)("img",{src:"/IDF-Timing-Now"+"/images/".concat((0,u.BQ)(g)).concat("dark"===localStorage.theme?"_LIGHT":"",".svg"),alt:(0,u.BQ)(g),className:"h-5 lg:h-10 mr-1"}),(0,d.jsx)("img",{src:"/IDF-Timing-Now"+"/images/".concat(g,".svg"),alt:g,className:"h-5 lg:h-10 mr-2 lg:mr-4"}),(0,d.jsx)("p",{className:"text-xs lg:text-base font-medium flex-grow line-clamp-2",children:(0,u.zj)(v)}),(0,d.jsx)("p",{className:"text-slate-400 text-xs font-bold pr-0.5 lg:pr-2",children:(0,d.jsx)(c,{})})]})}},9212:function(e,r,t){var l=t(9439),i=t(9867),n=t(5374),a=t(9228),o=t(2834);r.Z=function(e){var r=e.lineID,t=e.className,s=(0,i.useState)(""),d=(0,l.Z)(s,2),c=d[0],u=d[1];return(0,i.useEffect)((function(){var e=a.find((function(e){return e.fields.id_line===r}));if(e){var t=e.fields.name_line,l="#"+e.fields.colourweb_hexa,i="#"+e.fields.textcolourweb_hexa;u('\n                    <svg viewBox="0 0 120 120">\n                        <rect x="0" y="'.concat(21.5,'" width="100%" height="77" rx="10" ry="10" fill="').concat(l,'" />\n                        <text x="50%" y="53%" fill="').concat(i,'" font-family="Arial" font-size="45" text-anchor="middle" alignment-baseline="middle" font-weight="bold">').concat(t,"</text>\n                    </svg>\n                "))}}),[r]),(0,o.jsx)(n.Z,{src:c,className:t})}},4515:function(e,r,t){t.r(r),t.d(r,{default:function(){return c}});var l=t(9439),i=t(4670),n=t(9867),a=(t(5236),t(9790)),o=t(9212),s=t(2834);var d=function(e){e.lineID;var r=e.stationName,t=(0,n.useState)([]),i=(0,l.Z)(t,2),d=i[0],c=i[1],u=(0,n.useState)(""),m=(0,l.Z)(u,2),x=m[0],g=m[1],v=(0,n.useState)("current"),h=(0,l.Z)(v,2),p=(h[0],h[1],(0,n.useState)(null)),f=(0,l.Z)(p,2),w=(f[0],f[1],"https://prim.iledefrance-mobilites.fr/marketplace/stop-monitoring?MonitoringRef=STIF:StopArea:SP:".concat(r,":"));return(0,n.useEffect)((function(){var e=function(e,r,t){fetch(e,{headers:{Accept:"application/json",apikey:"l5iC8ZUjTN6WAevyFkU1tV8zkTbmNdjb"}}).then((function(e){return 404===e.status?null:e.json()})).then((function(e){var l,i,n,a,o=null===e||void 0===e||null===(l=e.Siri)||void 0===l||null===(i=l.ServiceDelivery)||void 0===i||null===(n=i.StopMonitoringDelivery[0])||void 0===n||null===(a=n.MonitoredStopVisit)||void 0===a?void 0:a.map((function(e){var r,t,l,i,n,a,o,s,d,c,u,m,x,g,v,h,p,f,w,b,y,j,N,k,M,D,Z,I,S;return{lineRef:null===e||void 0===e||null===(r=e.MonitoredVehicleJourney)||void 0===r||null===(t=r.LineRef)||void 0===t?void 0:t.value,operatorRef:null===e||void 0===e||null===(l=e.MonitoredVehicleJourney)||void 0===l||null===(i=l.OperatorRef)||void 0===i?void 0:i.value,directionName:null===e||void 0===e||null===(n=e.MonitoredVehicleJourney)||void 0===n||null===(a=n.DirectionName[0])||void 0===a?void 0:a.value,destinationName:null===e||void 0===e||null===(o=e.MonitoredVehicleJourney)||void 0===o||null===(s=o.DestinationName[0])||void 0===s?void 0:s.value,vehicleJourneyName:null===e||void 0===e||null===(d=e.MonitoredVehicleJourney)||void 0===d||null===(c=d.VehicleJourneyName[0])||void 0===c?void 0:c.value,expectedArrivalTime:null===e||void 0===e||null===(u=e.MonitoredVehicleJourney)||void 0===u||null===(m=u.MonitoredCall)||void 0===m?void 0:m.ExpectedArrivalTime,aimedArrival:null===e||void 0===e||null===(x=e.MonitoredVehicleJourney)||void 0===x||null===(g=x.MonitoredCall)||void 0===g?void 0:g.AimedArrival,expectedDepartureTime:null===e||void 0===e||null===(v=e.MonitoredVehicleJourney)||void 0===v||null===(h=v.MonitoredCall)||void 0===h?void 0:h.ExpectedDepartureTime,aimedDepartureTime:null===e||void 0===e||null===(p=e.MonitoredVehicleJourney)||void 0===p||null===(f=p.MonitoredCall)||void 0===f?void 0:f.aimedDepartureTime,arrivalStatus:null===e||void 0===e||null===(w=e.MonitoredVehicleJourney)||void 0===w||null===(b=w.MonitoredCall)||void 0===b?void 0:b.ArrivalStatus,departureStatus:null===e||void 0===e||null===(y=e.MonitoredVehicleJourney)||void 0===y||null===(j=y.MonitoredCall)||void 0===j?void 0:j.DepartureStatus,vehicleAtStop:null===e||void 0===e||null===(N=e.MonitoredVehicleJourney)||void 0===N||null===(k=N.MonitoredCall)||void 0===k?void 0:k.VehicleAtStop,minutesFromNow:(S=(null===e||void 0===e||null===(M=e.MonitoredVehicleJourney)||void 0===M||null===(D=M.MonitoredCall)||void 0===D?void 0:D.ExpectedDepartureTime)||(null===e||void 0===e||null===(Z=e.MonitoredVehicleJourney)||void 0===Z||null===(I=Z.MonitoredCall)||void 0===I?void 0:I.ExpectedArrivalTime),Math.floor((new Date(S)-new Date)/6e4))}}));r(o.sort((function(e,r){return e.minutesFromNow-r.minutesFromNow}))),t(e.nextDepartures.errorMessage)})).catch((function(e){return console.error(e)}))};e(w,c,g);var r=setInterval((function(){return e(w,c,g)}),2e3);return function(){return clearInterval(r)}}),[r]),"NO_REALTIME_SCHEDULES_FOUND"===x?(0,s.jsx)("div",{className:"flex items-center justify-center text-center text-xs lg:text-base bg-white dark:bg-gray-700 dark:text-gray-200 rounded-lg shadow-md p-4 mb-3 h-[44px] lg:h-[72px]",children:(0,s.jsx)("p",{className:"animate-pulse",children:"Information en direct indisponible"})}):0===d.length?(0,s.jsx)("div",{className:"overflow-y-auto max-h-[27rem] animate-pulse",children:(0,s.jsxs)("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-lg shadow-md h-[44px] lg:h-[72px]",children:[(0,s.jsx)("div",{role:"status",class:"flex items-center justify-center w-4 lg:w-10 h-4 lg:h-10 ml-1 lg:ml-0 mr-2 lg:mr-4 p-1 bg-gray-300 rounded-sm lg:rounded-lg dark:bg-gray-700",children:(0,s.jsx)("svg",{class:"w-5 h-5 text-gray-200 dark:text-gray-600","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 18",children:(0,s.jsx)("path",{d:"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"})})}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("div",{class:"w-12 lg:w-24 h-1 lg:h-2.5 mb-1 lg:mb-2.5 bg-gray-300 rounded-full dark:bg-gray-600"}),(0,s.jsx)("div",{class:"w-16 lg:w-32 h-1 lg:h-2 bg-gray-200 rounded-full dark:bg-gray-700"})]}),(0,s.jsxs)("div",{className:"ml-2 lg:ml-5 min-w-max pr-2 text-right",children:[(0,s.jsx)("div",{class:"w-6 lg:w-12 h-1 lg:h-2.5 mb-1 lg:mb-2.5 mr-1 bg-gray-300 rounded-full dark:bg-gray-700"}),(0,s.jsx)("div",{class:"w-4 lg:w-8 h-1 lg:h-2 mr-1 bg-gray-200 rounded-full float-right dark:bg-gray-700"})]})]})}):(0,s.jsx)("div",{className:"",children:d.map((function(e,r){return(0,s.jsxs)("div",{className:"flex items-center bg-white border-gray-400 dark:text-white dark:bg-gray-700 min-h-[44px] max-h-[72px] p-1 lg:p-4 relative",style:{borderBottom:"4px solid #".concat((0,a.$Z)(e.lineRef.replace(/:$/,"").split(":").pop()))},children:[(0,s.jsxs)("div",{className:"shrink-0",children:[(0,s.jsx)(o.Z,{lineID:e.lineRef.replace(/:$/,"").split(":").pop(),className:"h-6 lg:h-10 pl-1 lg:pl-0 mr-2 lg:mr-4"}),(0,s.jsx)("h3",{className:"text-[8px] lg:text-xs justify-center flex mx-auto mt-0.5 pl-0.5 lg:pl-0",children:e.vehicleJourneyName})]}),(0,s.jsx)("div",{className:"flex-grow overflow-hidden",children:(0,s.jsxs)("h2",{className:"font-bold text-[11px] lg:text-lg line-clamp-2 ml-2 lg:ml-4",children:[e.destinationName," - ",e.aimedArrival," - ",e.vehicleAtStop]})}),(0,s.jsxs)("div",{className:"ml-1 lg:ml-5 pr-2 text-right",children:[(0,s.jsxs)("p",{className:"text-sm lg:text-2xl font-bold",children:[e.departureStatus," ",e.minutesFromNow,"\u1d50\u2071\u207f"]}),(0,s.jsxs)("p",{className:"text-xs lg:text-sm text-right text-gray-400 dark:text-white",children:["Arrival: ",new Date(e.expectedArrivalTime).toLocaleTimeString()]}),(0,s.jsxs)("p",{className:"text-xs lg:text-sm text-right text-gray-400 dark:text-white",children:["Departure: ",new Date(e.expectedDepartureTime).toLocaleTimeString()]})]}),(0,s.jsx)("div",{className:"absolute top-0 right-0 bottom-0 left-0 lg:left-0 bg-gradient-to-r from-transparent to-white dark:to-gray-700",style:{backgroundImage:"linear-gradient(to right, transparent, rgba(".concat(parseInt((0,a.$Z)(e.lineRef.replace(/:$/,"").split(":").pop()).slice(0,2),16),", ").concat(parseInt((0,a.$Z)(e.lineRef.replace(/:$/,"").split(":").pop()).slice(2,4),16),", ").concat(parseInt((0,a.$Z)(e.lineRef.replace(/:$/,"").split(":").pop()).slice(4,6),16),", 0.1))")}})]},r)}))})};t(8171);var c=function(){var e=(0,i.UO)().stationID,r=(0,n.useState)([]),t=(0,l.Z)(r,2),a=t[0];return t[1],(0,s.jsx)("div",{className:"mx-auto ".concat(1===a.length?"grid grid-cols-1 max-w-screen-sm":"grid grid-cols-1 max-w-screen-lg"),children:(0,s.jsx)(d,{line:null,stationName:e})})}}}]);
//# sourceMappingURL=515.f7489851.chunk.js.map