{"version":3,"file":"static/js/155.c9e92a9c.chunk.js","mappings":"yNA0LA,IAnLA,SAAkBA,GAAkC,IAA/BC,EAAMD,EAANC,OAAQC,EAAWF,EAAXE,YACrBC,GADuCH,EAALI,MACtBF,GAGlBG,GAAkCC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAvCI,EAASF,EAAA,GAAEG,EAAYH,EAAA,GAC9BI,GAA4BL,EAAAA,EAAAA,UAAS,IAAGM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAjCE,EAAMD,EAAA,GAAEE,EAASF,EAAA,GAsFxB,IApFAG,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAS,eAAAC,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,EAAOC,GAAG,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAR,EAAAA,EAAAA,KAAAS,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEDC,MAAMV,GAAK,KAAD,EAAnB,OAARC,EAAQM,EAAAI,KAAAJ,EAAAE,KAAA,EACKR,EAASW,OAAO,KAAD,EAA5BV,EAAIK,EAAAI,KAGoB,KAFxBR,EAAiBD,EAAKC,eAAeD,MAExBW,QAAiBV,EAAeW,OAAM,SAAAC,GAAK,OAAIA,EAAMC,aAAa,KAG7EZ,EAAY,GAClBD,EAAec,SAAQ,SAAAF,GACrB,GAAIG,EAAAA,EAAUC,MAAMC,SAASL,EAAMM,QAAS,CAC1C,IAAMC,EAAwBC,EAAUC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,QAAUX,EAAMY,YAAYC,YAAYC,MAAM,KAAKC,KAAK,IAE1H,GAAIR,EAAuB,CACzB,IAAMS,EAAWT,EAAsBU,MAClC5B,EAAUgB,SAASW,IACtB3B,EAAU6B,KAAKF,EAEnB,CACF,CACF,IAEI3B,EAAUS,OAAS,GACfR,EAAgBD,EAAU8B,KAAI,SAAAH,GAClC,IAAMI,EAAM,2DAAAC,OAA8DzD,EAAM,0BAAAyD,OAAyBvD,EAAS,uBAAAuD,OAAsBL,EAAQ,aAEhJ,OADAM,QAAQC,IAAIH,GACLzB,MAAMyB,GAAQI,MAAK,SAAAtC,GAAQ,OAAIA,EAASW,MAAM,GACvD,IAEF4B,QAAQC,IAAIpC,GAAekC,MAAK,SAAAG,GAC9B,IAAIC,EAAyBD,EAAQE,QAAO,SAACC,EAAUC,EAAQC,GAC7D,GAAID,GAAUA,EAAO3C,gBAAkB2C,EAAO3C,eAAeD,KAAM,CACjE,IAAM6B,EAAW3B,EAAU2C,GACrBnE,GAAcoE,EAAAA,EAAAA,IAA0BjB,GAM9C,OALAe,EAAO3C,eAAeD,KAAKe,SAAQ,SAAAF,GAC5BA,EAAMC,gBACTD,EAAMC,cAAgBpC,EAE1B,IACOiE,EAAST,OAAOU,EAAO3C,eAAeD,KAC/C,CACA,OAAO2C,CACT,GAAG,IAGHF,EAAuBM,MAAK,SAACC,EAAGC,GAAC,OAAKC,SAASF,EAAEG,MAAQD,SAASD,EAAEE,KAAK,IAQzEV,EAAyBA,EAAuBW,QAC9C,SAACC,EAAOR,EAAOS,GAAI,OAAKA,EAAKC,WAAU,SAAAC,GAAG,OANvBC,EAMuCD,EANjCE,EAMsCL,EALxDM,KAAKC,UAAUH,KAAUE,KAAKC,UAAUF,GAD7B,IAACD,EAAMC,CAM4C,MAAMb,CAAK,IAGlF3D,EAAauD,GACbnD,EAAUU,EAAK6D,aACf,MAEA3E,EAAae,GACbX,EAAUU,EAAK6D,gBAxDjBvE,EAAU,+BA0DXe,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAyD,GAAAzD,EAAA,kCAAAA,EAAA0D,OAAA,GAAAlE,EAAA,mBAIJ,gBArEcmE,GAAA,OAAAvE,EAAAwE,MAAA,KAAAC,UAAA,KAuETpE,EAAG,8DAAAoC,OAAiEzD,EAAM,0BAAAyD,OAAyBvD,EAAS,aAClHwD,QAAQC,IAAItC,GACZN,EAAUM,GAEV,IAAMqE,EAAaC,aAAY,WAC7B5E,EAAUM,EACZ,GAAG,KAEH,OAAO,kBAAMuE,cAAcF,EAAY,CACzC,GAAG,CAAC1F,EAAQE,IAGG,gCAAXU,EACF,OAAOiF,EAAAA,EAAAA,KAACC,EAAAA,GAAI,CAACC,GAAE,IAAAtC,OAAMzD,EAAM,KAAAyD,OAAIvD,GAAY8F,UAACH,EAAAA,EAAAA,KAAA,OAAKI,UAAU,kMAAiMD,UAACH,EAAAA,EAAAA,KAAA,KAAGI,UAAU,gBAAeD,SAAC,2CAI5R,GAAyB,IAArBxF,EAAU0B,OACZ,OACE2D,EAAAA,EAAAA,KAAA,OAAKI,UAAU,8CAA6CD,UAC1DE,EAAAA,EAAAA,MAAA,OAAKD,UAAU,8IAA6ID,SAAA,EAC1JH,EAAAA,EAAAA,KAAA,OAAKM,KAAK,SAASC,MAAM,+IAA8IJ,UACrKH,EAAAA,EAAAA,KAAA,OAAKO,MAAM,2CAA2C,cAAY,OAAOC,MAAM,6BAA6BC,KAAK,eAAeC,QAAQ,YAAWP,UACjJH,EAAAA,EAAAA,KAAA,QAAMW,EAAE,sSAIZN,EAAAA,EAAAA,MAAA,OAAKD,UAAU,YAAWD,SAAA,EACxBH,EAAAA,EAAAA,KAAA,OAAKO,MAAM,wFACXP,EAAAA,EAAAA,KAAA,OAAKO,MAAM,0EAGbF,EAAAA,EAAAA,MAAA,OAAKD,UAAU,yCAAwCD,SAAA,EACrDH,EAAAA,EAAAA,KAAA,OAAKO,MAAM,4FACXP,EAAAA,EAAAA,KAAA,OAAKO,MAAM,6FAQrB,IAAMK,EAAgB,CAAC,EASvB,OARAjG,EAAU8B,SAAQ,SAACF,GACjB,IAAMsE,EAAOtE,EAAMsE,MAAQ,QACtBD,EAAcC,KACjBD,EAAcC,GAAQ,IAExBD,EAAcC,GAAMpD,KAAKlB,EAC3B,KAGEyD,EAAAA,EAAAA,KAAA,OAAKI,UAAU,gCAA+BD,SAC3CW,OAAOC,KAAKH,GAAelD,KAAI,SAACmD,GAAI,OACnCR,EAAAA,EAAAA,MAAA,OAAAF,SAAA,CACY,UAATU,IACCb,EAAAA,EAAAA,KAAA,MAAII,UAAU,yBAAwBD,SAC1B,MAATU,EAAe,GAAK,iBAGxBD,EAAcC,GAAMnD,KAAI,SAACnB,EAAOgC,GAAK,OAEpCyB,EAAAA,EAAAA,KAACC,EAAAA,GAAI,CAACC,GAAE,IAAAtC,OAAMzD,EAAM,KAAAyD,OAAIvD,GAAY8F,UACpCE,EAAAA,EAAAA,MAAA,OAEED,UAAU,4HACVY,MAAO,CAACC,aAAa,cAADrD,QAAgBsD,EAAAA,EAAAA,IAAqB/G,KAAWgG,SAAA,EAEpEE,EAAAA,EAAAA,MAAA,OAAKD,UAAU,WAAUD,SAAA,EACvBH,EAAAA,EAAAA,KAACmB,EAAAA,GAAgB,CAAChH,OAAQA,EAAQiG,UAAU,8BAC5CJ,EAAAA,EAAAA,KAAA,MAAII,UAAU,0EAAyED,UAAEiB,EAAAA,EAAAA,IAAmB7E,EAAM8E,mBAEpHrB,EAAAA,EAAAA,KAAA,OAAKI,UAAU,4BAA2BD,UACxCH,EAAAA,EAAAA,KAAA,MAAII,UAAU,6DAA4DD,UAAEiB,EAAAA,EAAAA,IAAmB7E,EAAMC,oBAEvGwD,EAAAA,EAAAA,KAAA,OAAKI,UAAU,+BAA8BD,SAC3B,YAAf5D,EAAM+E,MACHtB,EAAAA,EAAAA,KAAA,KAAGI,UAAU,0FAAyFD,SAAE5D,EAAMgF,YAEhHlB,EAAAA,EAAAA,MAAAmB,EAAAA,SAAA,CAAArB,SAAA,EACEE,EAAAA,EAAAA,MAAA,KAAGD,UAAS,mEAAAxC,OAAoF,MAAfrB,EAAMsC,KAAe,gBAAkB,IAAKsB,SAAA,CAAE5D,EAAMsC,MAAKmB,EAAAA,EAAAA,KAAA,QAAMI,UAAU,qBAAoBD,SAAC,2BAC/KH,EAAAA,EAAAA,KAAA,KAAGI,UAAU,8DAA6DD,SAAE,IAAIsB,KAAKA,KAAKC,MAAmE,KAA3C,YAAfnF,EAAM+E,KAAqB/E,EAAMgF,SAAWhF,EAAMsC,OAAe8C,mBAAmB,GAAI,CAAEC,KAAM,UAAWC,OAAQ,oBAI5N7B,EAAAA,EAAAA,KAAA,OACEI,UAAU,+GACVY,MAAO,CACLc,gBAAgB,+CAADlE,OAAiDgB,UAASsC,EAAAA,EAAAA,IAAqB/G,GAAQ4H,MAAM,EAAG,GAAI,IAAG,MAAAnE,OAAKgB,UAASsC,EAAAA,EAAAA,IAAqB/G,GAAQ4H,MAAM,EAAG,GAAI,IAAG,MAAAnE,OAAKgB,UAASsC,EAAAA,EAAAA,IAAqB/G,GAAQ4H,MAAM,EAAG,GAAI,IAAG,gBAxB3OxF,EAAMsC,KAAON,IA4Bb,MAtCDsC,EAwCJ,KAId,C,iIC7JA,EAzBe,WACb,IAAAtG,GAA8BC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAtCyH,EAAOvH,EAAA,GAAEwH,EAAUxH,EAAA,GAS1B,OACEuF,EAAAA,EAAAA,KAAA,UAAQkC,QARU,WAClBD,GAAYD,EACd,EAMgC,aAAYA,EAAU,wBAA0B,mBAAmB7B,SAC9F6B,GACChC,EAAAA,EAAAA,KAAA,OAAKO,MAAM,sDAAsD,cAAY,OAAOC,MAAM,6BAA6BC,KAAK,eAAeC,QAAQ,YAAWP,UAC5JH,EAAAA,EAAAA,KAAA,QAAMW,EAAE,sHAGVX,EAAAA,EAAAA,KAAA,OAAKO,MAAM,sDAAsD,cAAY,OAAOC,MAAM,6BAA6BC,KAAK,eAAeC,QAAQ,WAAUP,UAC3JH,EAAAA,EAAAA,KAAA,QAAMW,EAAE,+IAKlB,E,UC0CA,MA7DA,SAAoBzG,GAAyB,IAADiI,EAAAC,EAAAC,EAAAC,EAArBnI,EAAMD,EAANC,OAAQE,EAASH,EAATG,UACrBkI,GAAWC,EAAAA,EAAAA,MAMjBjI,GAA4CC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAjDkI,EAAchI,EAAA,GAAEiI,EAAiBjI,EAAA,GACxCI,GAAkCL,EAAAA,EAAAA,WAAS,GAAMM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAA1C8H,EAAS7H,EAAA,GAAE8H,EAAY9H,EAAA,IAE9BG,EAAAA,EAAAA,YAAU,WACN,IAAM4H,EAAgB,eAAA1H,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,IAAA,IAAAuH,EAAAL,EAAA,OAAApH,EAAAA,EAAAA,KAAAS,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,GACY8G,EAAAA,EAAAA,KAAmB,KAAD,EAAAD,EAAA/G,EAAAI,KAA3CsG,EAAcK,EAAdL,eACRC,EAAkBD,GAAgB,wBAAA1G,EAAA0D,OAAA,GAAAlE,EAAA,KACrC,kBAHqB,OAAAJ,EAAAwE,MAAA,KAAAC,UAAA,KAKtBiD,GACJ,GAAG,IAGH,IAAMG,EAAYP,EAAeQ,MAAK,SAAAC,GAAI,OAAIA,EAAKrG,SAAW,aAAe1C,IAA6B,IAAnB+I,EAAKF,SAAkB,IAG9G,OACI3C,EAAAA,EAAAA,MAAA,OAAKD,UAAU,mLAAmL+C,aAAc,kBAAMP,GAAa,EAAK,EAAEQ,aAAc,kBAAMR,GAAa,EAAM,EAACzC,SAAA,CAC7Q6C,IACG3C,EAAAA,EAAAA,MAAA,QAAMD,UAAU,WAAUD,SAAA,CACrBwC,IACGtC,EAAAA,EAAAA,MAAA,OAAK,kBAAagD,GAAG,cAAc/C,KAAK,UAAUF,UAAU,0NAAyND,SAAA,EACjRH,EAAAA,EAAAA,KAAA,OAAKI,UAAU,kHAAiHD,UAC5HH,EAAAA,EAAAA,KAAA,MAAII,UAAU,wDAAuDD,SAAoE,QAApEgC,EAAEM,EAAezF,MAAK,SAAAkG,GAAI,OAAIA,EAAKrG,SAAW,aAAe1C,CAAM,WAAC,IAAAgI,OAAA,EAAlEA,EAAoEmB,WAAWC,WAE1JlD,EAAAA,EAAAA,MAAA,OAAKD,UAAU,YAAWD,SAAA,EACtBH,EAAAA,EAAAA,KAAA,KAAAG,SAAsE,QAAtEiC,EAAIK,EAAezF,MAAK,SAAAkG,GAAI,OAAIA,EAAKrG,SAAW,aAAe1C,CAAM,WAAC,IAAAiI,OAAA,EAAlEA,EAAoEkB,WAAWE,SACnFnD,EAAAA,EAAAA,MAAA,KAAGE,MAAM,qKAAqK2B,QAhCnL,WACnBK,EAAS,SAAD3E,OAAUzD,GACtB,EA8BkOgG,SAAA,EAClMH,EAAAA,EAAAA,KAAA,OAAKO,MAAM,uBAAuB,cAAY,OAAOC,MAAM,6BAA6BC,KAAK,eAAeC,QAAQ,YAAWP,UAC3HH,EAAAA,EAAAA,KAAA,QAAMW,EAAE,mIACN,2BAMtBX,EAAAA,EAAAA,KAAA,QAAMI,UAAU,2EAA0ED,UACtFE,EAAAA,EAAAA,MAAA,QAAMD,UAAU,sCAAqCD,SAAA,EACjDH,EAAAA,EAAAA,KAAA,QAAMI,UAAS,2EAAAxC,OAAyK,eAA1B,QAAlEyE,EAAAI,EAAezF,MAAK,SAAAkG,GAAI,OAAIA,EAAKrG,SAAW,aAAe1C,CAAM,WAAC,IAAAkI,OAAA,EAAlEA,EAAoEiB,WAAWG,UAA2B,aAAe,oBACrNzD,EAAAA,EAAAA,KAAA,QAAMI,UAAS,2DAAAxC,OAAyJ,eAA1B,QAAlE0E,EAAAG,EAAezF,MAAK,SAAAkG,GAAI,OAAIA,EAAKrG,SAAW,aAAe1C,CAAM,WAAC,IAAAmI,OAAA,EAAlEA,EAAoEgB,WAAWG,UAA2B,aAAe,4BAKrNzD,EAAAA,EAAAA,KAAA,OAAK0D,IAAKC,kBAAsB,WAAA/F,QAAcgG,EAAAA,EAAAA,IAAqBzJ,IAAOyD,OAA0B,SAAvBiG,aAAaC,MAAmB,SAAW,GAAE,QAAQC,KAAKH,EAAAA,EAAAA,IAAqBzJ,GAASiG,UAAU,sBAC/KJ,EAAAA,EAAAA,KAACmB,EAAAA,GAAgB,CAAChH,OAAQA,EAAQiG,UAAU,8BAC5CJ,EAAAA,EAAAA,KAAA,KAAGI,UAAU,0DAAyDD,UAAE3B,EAAAA,EAAAA,IAA0BnE,MAClG2F,EAAAA,EAAAA,KAAA,KAAGI,UAAU,kDAAiDD,UAC1DH,EAAAA,EAAAA,KAACgE,EAAM,QAIvB,C,yECvCA,UAtBA,WACI,IAAMC,GAAWC,EAAAA,EAAAA,MACXC,EAAS,IAAIC,gBAAgBH,EAASI,QACtCC,EAAQH,EAAOI,OAAO,QACtBC,EAAYL,EAAOI,OAAO,aAEhC,OACIvE,EAAAA,EAAAA,KAAA,OAAKI,UAAS,QAAAxC,OAA2B,IAAjB0G,EAAMjI,OAAe,8BAAgC,4CAA2C,0BAAyB8D,SAC5ImE,EAAM5G,KAAI,SAACwF,EAAM3E,GACd,OACIyB,EAAAA,EAAAA,KAAA,OAAgBI,UAAU,GAAED,UACxBE,EAAAA,EAAAA,MAAA,OAAAF,SAAA,EACIH,EAAAA,EAAAA,KAACyE,EAAAA,EAAW,CAACtK,OAAQ+I,EAAM7I,UAAWmK,EAAUjG,MAChDyB,EAAAA,EAAAA,KAAC0E,EAAAA,EAAS,CAACvK,OAAQ+I,EAAM9I,YAAaoK,EAAUjG,SAH9C2E,EAOlB,KAGZ,C","sources":["components/Timing.js","components/elements/fav.js","components/stationHeader.js","pages/SearchResult.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { removeGareDePrefix } from '../utils/stringUtils';\r\nimport { lineTypes } from '../components/Trafic';\r\nimport relations from '../data/relations.json';\r\nimport { LineLogoByLineID, getLineColorByLineID, getStationNameByStationID  } from '../utils/dataHelpers';\r\n\r\nfunction TrainInfo({ lineID, stationName, limit }) { //to= number=\r\n  const stationID = stationName;\r\n\r\n  // Fetch train departure every 2 seconds\r\n  const [trainData, setTrainData] = useState([]);\r\n  const [status, setStatus] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchData = async (url) => {\r\n      try {\r\n        const response = await fetch(url);\r\n        const data = await response.json();\r\n        const nextDepartures = data.nextDepartures.data;\r\n\r\n        if (nextDepartures.length === 0 || !nextDepartures.every(train => train.lineDirection)) {\r\n          setStatus('NO_REALTIME_SCHEDULES_FOUND');\r\n        } else {\r\n          const zoneAreas = [];\r\n          nextDepartures.forEach(train => {\r\n            if (lineTypes.TRAIN.includes(train.lineId)) { //\r\n              const correspondingRelation = relations.find(relation => relation.arrid === train.destination.stopPointId.split(':').pop());\r\n  \r\n              if (correspondingRelation) {\r\n                const zoneArea = correspondingRelation.zdcid;\r\n                if (!zoneAreas.includes(zoneArea)) {\r\n                  zoneAreas.push(zoneArea);\r\n                }\r\n              }\r\n            }\r\n          });\r\n\r\n          if (zoneAreas.length > 0) {\r\n            const fetchPromises = zoneAreas.map(zoneArea => {\r\n              const newURL = `https://api-iv.iledefrance-mobilites.fr/lines/line:IDFM:${lineID}/stops/stop_area:IDFM:${stationID}/to/stop_area:IDFM:${zoneArea}/realTime`;\r\n              console.log(newURL)\r\n              return fetch(newURL).then(response => response.json());\r\n            });\r\n\r\n          Promise.all(fetchPromises).then(results => {\r\n            let combinedNextDepartures = results.reduce((combined, result, index) => {\r\n              if (result && result.nextDepartures && result.nextDepartures.data) {\r\n                const zoneArea = zoneAreas[index];\r\n                const stationName = getStationNameByStationID(zoneArea);\r\n                result.nextDepartures.data.forEach(train => {\r\n                  if (!train.lineDirection) {\r\n                    train.lineDirection = stationName;\r\n                  }\r\n                });\r\n                return combined.concat(result.nextDepartures.data);\r\n              }\r\n              return combined;\r\n            }, []);\r\n          \r\n            // Sort the combinedNextDepartures array by the time property\r\n            combinedNextDepartures.sort((a, b) => parseInt(a.time) - parseInt(b.time));\r\n          \r\n            // Helper function to check for identical objects\r\n            const isIdentical = (obj1, obj2) => {\r\n              return JSON.stringify(obj1) === JSON.stringify(obj2);\r\n            };\r\n          \r\n            // Remove identical objects from combinedNextDepartures\r\n            combinedNextDepartures = combinedNextDepartures.filter(\r\n              (value, index, self) => self.findIndex(obj => isIdentical(obj, value)) === index\r\n            );\r\n            \r\n            setTrainData(combinedNextDepartures);\r\n            setStatus(data.errorMessage);\r\n            });\r\n          } else {\r\n            setTrainData(nextDepartures);\r\n            setStatus(data.errorMessage);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        // Handle error\r\n      }\r\n    };\r\n\r\n    const url = `https://api-iv.iledefrance-mobilites.fr/lines/v2/line:IDFM:${lineID}/stops/stop_area:IDFM:${stationID}/realTime`;\r\n    console.log(url)\r\n    fetchData(url);\r\n\r\n    const intervalId = setInterval(() => {\r\n      fetchData(url);\r\n    }, 2000);\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [lineID, stationID]);\r\n\r\n\r\n  if (status === 'NO_REALTIME_SCHEDULES_FOUND') {\r\n    return <Link to={`/${lineID}/${stationID}`}><div className=\"shadow-[inset_0rem_0.2rem_0.4rem_0_rgb(0,0,0,0.1)] flex items-center justify-center text-center text-xs lg:text-base bg-white dark:bg-gray-700 dark:text-gray-200 p-4 mb-3 h-[44px] lg:h-[72px]\"><p className='animate-pulse'>Information en direct indisponible</p></div></Link>;\r\n  }\r\n\r\n  // Display loading animation\r\n  if (trainData.length === 0) {\r\n    return (\r\n      <div className=\"overflow-y-auto max-h-[27rem] animate-pulse\">\r\n        <div className=\"flex items-center bg-white dark:bg-gray-800 shadow-[inset_0rem_0.2rem_0.4rem_0_rgb(0,0,0,0.1)] h-[44px] lg:h-[72px] p-1 lg:p-4 mb-1 lg:mb-3\">\r\n          <div role=\"status\" class=\"flex items-center justify-center w-4 lg:w-10 h-4 lg:h-10 ml-1 lg:ml-0 mr-2 lg:mr-4 p-1 bg-gray-300 rounded-sm lg:rounded-lg dark:bg-gray-700\">\r\n            <svg class=\"w-5 h-5 text-gray-200 dark:text-gray-600\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 20 18\">\r\n              <path d=\"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z\" />\r\n            </svg>\r\n          </div>\r\n\r\n          <div className=\"flex-grow\">\r\n            <div class=\"w-12 lg:w-24 h-1 lg:h-2.5 mb-1 lg:mb-2.5 bg-gray-300 rounded-full dark:bg-gray-600\"></div>\r\n            <div class=\"w-16 lg:w-32 h-1 lg:h-2 bg-gray-200 rounded-full dark:bg-gray-700\"></div>\r\n          </div>\r\n\r\n          <div className=\"ml-2 lg:ml-5 min-w-max pr-2 text-right\">\r\n            <div class=\"w-6 lg:w-12 h-1 lg:h-2.5 mb-1 lg:mb-2.5 mr-1 bg-gray-300 rounded-full dark:bg-gray-700\"></div>\r\n            <div class=\"w-4 lg:w-8 h-1 lg:h-2 mr-1 bg-gray-200 rounded-full float-right dark:bg-gray-700\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Display train departure\r\n  const groupedTrains = {};\r\n  trainData.forEach((train) => {\r\n    const sens = train.sens || 'other';\r\n    if (!groupedTrains[sens]) {\r\n      groupedTrains[sens] = [];\r\n    }\r\n    groupedTrains[sens].push(train);\r\n  });\r\n\r\n  return (\r\n    <div className=\"overflow-y-auto max-h-[27rem]\">\r\n      {Object.keys(groupedTrains).map((sens) => (\r\n        <div key={sens}>\r\n          {sens !== 'other' && (\r\n            <h2 className=\"text-xs font-bold mb-2\">\r\n              {sens === '1' ? '' : 'Direction -1'}\r\n            </h2>\r\n          )}\r\n          {groupedTrains[sens].map((train, index) => (\r\n            // <Link to={`/search?line=${lineID}&stop_area=${stationID}`}>\r\n            <Link to={`/${lineID}/${stationID}`}>\r\n            <div \r\n              key={train.time + index} \r\n              className=\"flex items-center bg-white border-gray-400 dark:text-white dark:bg-gray-800 min-h-[44px] max-h-[72px] p-1 lg:p-4 relative\" \r\n              style={{borderBottom: `2px solid #${getLineColorByLineID(lineID)}`}}\r\n            >\r\n              <div className='shrink-0'>\r\n                <LineLogoByLineID lineID={lineID} className=\"h-4 lg:h-10 pl-1 lg:pl-0\" />\r\n                <h3 className='text-[8px] lg:text-xs justify-center flex mx-auto mt-0.5 pl-0.5 lg:pl-0'>{removeGareDePrefix(train.vehicleName)}</h3>\r\n              </div>\r\n              <div className=\"flex-grow overflow-hidden\">\r\n                <h2 className='font-bold text-[11px] lg:text-lg line-clamp-2 ml-2 lg:ml-4'>{removeGareDePrefix(train.lineDirection)}</h2>\r\n              </div>\r\n              <div className=\"ml-1 lg:ml-5 pr-2 text-right\">\r\n                {train.code === 'message' ? (\r\n                    <p className=\"text-[10px] lg:text-base font-bold text-green-600 dark:text-green-500 whitespace-normal\">{train.schedule}</p>\r\n                ) : (\r\n                  <>\r\n                    <p className={`text-sm lg:text-2xl font-bold text-green-600 dark:text-green-500${train.time === '0' ? 'animate-pulse' : ''}`}>{train.time}<span className=\"text-xs lg:text-lg\">ᵐⁱⁿ</span></p>\r\n                    <p className=\"text-xs lg:text-sm text-right text-gray-400 dark:text-white\">{new Date(Date.now() + (train.code === 'message' ? train.schedule : train.time) * 60000).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</p>\r\n                  </>\r\n                )}\r\n              </div>\r\n              <div \r\n                className=\"absolute top-0 right-0 bottom-0 left-0 lg:left-0 bg-gradient-to-r from-transparent to-white dark:to-gray-800\" \r\n                style={{\r\n                  backgroundImage: `linear-gradient(to right, transparent, rgba(${parseInt(getLineColorByLineID(lineID).slice(0, 2), 16)}, ${parseInt(getLineColorByLineID(lineID).slice(2, 4), 16)}, ${parseInt(getLineColorByLineID(lineID).slice(4, 6), 16)}, 0.1))`\r\n                }}\r\n              />\r\n            </div>\r\n            </Link>\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TrainInfo;","import React, { useState } from 'react';\r\n\r\nconst AddFav = () => {\r\n  const [clicked, setClicked] = useState(false);\r\n\r\n  const handleClick = () => {\r\n    setClicked(!clicked);\r\n  };\r\n\r\n  // <svg class=\"w-3 h-3 lg:w-5 lg:h-5 text-gray-800 dark:text-white\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 22 20\">\r\n  //   <path d=\"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z\"/>\r\n  // </svg>\r\n  return (\r\n    <button onClick={handleClick} aria-label={clicked ? 'Remove from favorites' : 'Add to favorites'}>\r\n      {clicked ? (\r\n        <svg class=\"w-3 h-3 lg:w-5 lg:h-5 text-gray-800 dark:text-white\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 14 20\">\r\n          <path d=\"M13 20a1 1 0 0 1-.64-.231L7 15.3l-5.36 4.469A1 1 0 0 1 0 19V2a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v17a1 1 0 0 1-1 1Z\" />\r\n        </svg>\r\n      ) : (\r\n        <svg class=\"w-3 h-3 lg:w-5 lg:h-5 text-gray-800 dark:text-white\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 4 15\">\r\n          <path d=\"M3.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 6.041a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 5.959a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z\" />\r\n        </svg>\r\n      )}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default AddFav;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { checkDisruptions } from './Trafic';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport AddFav from './elements/fav'\r\nimport { getStationNameByStationID, getTransportByLineID, LineLogoByLineID } from '../utils/dataHelpers';\r\n\r\nfunction StationInfo({ lineID, stationID }) {\r\n    const navigate = useNavigate();\r\n    const handleNavigate = () => {\r\n        navigate(`/line/${lineID}`);\r\n    };\r\n\r\n    // Fetch & check disruptions\r\n    const [disruptedLines, setDisruptedLines] = useState([]);\r\n    const [isHovered, setIsHovered] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchDisruptions = async () => {\r\n            const { disruptedLines } = await checkDisruptions();\r\n            setDisruptedLines(disruptedLines);\r\n        };\r\n\r\n        fetchDisruptions();\r\n    }, []);\r\n\r\n    // Check if line is disrupted\r\n    const disrupted = disruptedLines.some(line => line.lineId === 'line:IDFM:' + lineID && line.disrupted === true);\r\n\r\n    // Display station header\r\n    return (\r\n        <div className=\"flex items-center bg-white dark:bg-gray-800 dark:text-white border-gray-900 dark:border-gray-800 border-solid border p-2 lg:p-4 mb-2 lg:mb-4 rounded-b-lg shadow-md min-h-[52px]\" onMouseEnter={() => setIsHovered(true)} onMouseLeave={() => setIsHovered(false)}>\r\n            {disrupted && (\r\n                <span className=\"relative\">\r\n                    {isHovered && (\r\n                        <div data-popover id=\"popover-top\" role=\"tooltip\" className=\"absolute z-10 inline-block w-40 lg:w-80 text-sm text-gray-500 transition-opacity duration-300 bg-white border border-gray-200 rounded-lg shadow-sm opacity-100 dark:text-gray-400 dark:border-gray-600 dark:bg-gray-800\">\r\n                            <div className=\"px-3 py-2 bg-gray-100 border-b border-gray-200 rounded-t-lg dark:border-gray-600 dark:bg-gray-700 flex flex-row\">\r\n                                <h3 className=\"flex-grow font-semibold text-gray-900 dark:text-white\">{disruptedLines.find(line => line.lineId === 'line:IDFM:' + lineID)?.disruption.cause}</h3>\r\n                            </div>\r\n                            <div className=\"px-3 py-2\">\r\n                                <p>{disruptedLines.find(line => line.lineId === 'line:IDFM:' + lineID)?.disruption.title}</p>\r\n                                <a class=\"bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 hover:dark:bg-gray-600 font-medium rounded-lg text-xs px-3 mt-3 text-center inline-flex items-center cursor-pointer\" onClick={handleNavigate}>\r\n                                    <svg class=\"-ml-0.5 mr-2 h-3 w-3\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 20 14\">\r\n                                        <path d=\"M10 0C4.612 0 0 5.336 0 7c0 1.742 3.546 7 10 7 6.454 0 10-5.258 10-7 0-1.664-4.612-7-10-7Zm0 10a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z\" />\r\n                                    </svg>\r\n                                    En savoir plus\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    <span className=\"absolute top-[-1rem] right-[-0.4rem] lg:top-[-1.8rem] lg:right-[-0.7rem]\">\r\n                        <span className=\"relative flex h-3 w-3 lg:h-5 lg:w-5\">\r\n                            <span className={`animate-ping absolute inline-flex h-full w-full rounded-full opacity-75 ${disruptedLines.find(line => line.lineId === 'line:IDFM:' + lineID)?.disruption.severity === 'BLOQUANTE' ? 'bg-red-600' : 'bg-yellow-400'}`}></span>\r\n                            <span className={`relative inline-flex rounded-full h-3 w-3 lg:h-5 lg:w-5 ${disruptedLines.find(line => line.lineId === 'line:IDFM:' + lineID)?.disruption.severity === 'BLOQUANTE' ? 'bg-red-600' : 'bg-yellow-400'}`}></span>\r\n                        </span>\r\n                    </span>\r\n                </span>\r\n            )}\r\n            <img src={process.env.PUBLIC_URL + `/images/${getTransportByLineID(lineID)}${localStorage.theme === 'dark' ? '_LIGHT' : ''}.svg`} alt={getTransportByLineID(lineID)} className=\"h-5 lg:h-10 mr-1\" />\r\n            <LineLogoByLineID lineID={lineID} className=\"h-5 lg:h-10 mr-2 lg:mr-4\" />\r\n            <p className='text-xs lg:text-base font-medium flex-grow line-clamp-2'>{getStationNameByStationID(stationID)}</p>\r\n            <p className='text-slate-400 text-xs font-bold pr-0.5 lg:pr-2'>\r\n                <AddFav />\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default StationInfo;","import { useLocation } from \"react-router-dom\";\r\nimport StationInfo from '../components/stationHeader';\r\nimport TrainInfo from '../components/Timing';\r\n\r\nfunction SearchResult() {\r\n    const location = useLocation();\r\n    const params = new URLSearchParams(location.search);\r\n    const lines = params.getAll('line');\r\n    const stopAreas = params.getAll('stop_area');\r\n\r\n    return (\r\n        <div className={`grid ${lines.length === 1 ? 'grid-cols-1 max-w-screen-sm' : 'grid-cols-2 sm:grid-cols-2 lg:grid-cols-3'} gap-2 lg:gap-4 sm:m-6`}>\r\n            {lines.map((line, index) => {\r\n                return (\r\n                    <div key={line} className=\"\">\r\n                        <div>\r\n                            <StationInfo lineID={line} stationID={stopAreas[index]} />\r\n                            <TrainInfo lineID={line} stationName={stopAreas[index]} />\r\n                        </div>\r\n                    </div>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SearchResult;"],"names":["_ref","lineID","stationName","stationID","limit","_useState","useState","_useState2","_slicedToArray","trainData","setTrainData","_useState3","_useState4","status","setStatus","useEffect","fetchData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","response","data","nextDepartures","zoneAreas","fetchPromises","wrap","_context","prev","next","fetch","sent","json","length","every","train","lineDirection","forEach","lineTypes","TRAIN","includes","lineId","correspondingRelation","relations","find","relation","arrid","destination","stopPointId","split","pop","zoneArea","zdcid","push","map","newURL","concat","console","log","then","Promise","all","results","combinedNextDepartures","reduce","combined","result","index","getStationNameByStationID","sort","a","b","parseInt","time","filter","value","self","findIndex","obj","obj1","obj2","JSON","stringify","errorMessage","t0","stop","_x","apply","arguments","intervalId","setInterval","clearInterval","_jsx","Link","to","children","className","_jsxs","role","class","xmlns","fill","viewBox","d","groupedTrains","sens","Object","keys","style","borderBottom","getLineColorByLineID","LineLogoByLineID","removeGareDePrefix","vehicleName","code","schedule","_Fragment","Date","now","toLocaleTimeString","hour","minute","backgroundImage","slice","clicked","setClicked","onClick","_disruptedLines$find","_disruptedLines$find2","_disruptedLines$find3","_disruptedLines$find4","navigate","useNavigate","disruptedLines","setDisruptedLines","isHovered","setIsHovered","fetchDisruptions","_yield$checkDisruptio","checkDisruptions","disrupted","some","line","onMouseEnter","onMouseLeave","id","disruption","cause","title","severity","src","process","getTransportByLineID","localStorage","theme","alt","AddFav","location","useLocation","params","URLSearchParams","search","lines","getAll","stopAreas","StationInfo","TrainInfo"],"sourceRoot":""}