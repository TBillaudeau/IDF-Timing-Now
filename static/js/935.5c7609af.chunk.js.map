{"version":3,"file":"static/js/935.5c7609af.chunk.js","mappings":"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","sources":["components/Timing4.js","../node_modules/react-leaflet/lib/GeoJSON.js","pages/Proximity.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { getLineColorByLineID, LineLogoByLineID, getTransportByLineID } from '../utils/dataHelpers';\r\nimport LineSVG from './tools/createLineLogo';\r\n\r\nfunction TrainInfo({ lineID, stationName }) {\r\n  // Fetch train departure every 2 seconds\r\n  const [trainData, setTrainData] = useState([]);\r\n  const [status, setStatus] = useState('');\r\n  const [activeTab, setActiveTab] = useState('current');\r\n  const [selectedLogo, setSelectedLogo] = useState(null);\r\n\r\n  const calculateMinutesFromNow = (time) => {\r\n    return Math.floor((new Date(time) - new Date()) / 60000);\r\n  };\r\n\r\n  const url = `https://prim.iledefrance-mobilites.fr/marketplace/stop-monitoring?MonitoringRef=STIF:StopArea:SP:${stationName}:`;\r\n\r\n  useEffect(() => {\r\n    const fetchData = (url, setData, setStatus) => {\r\n      fetch(url, {\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'apikey': process.env.REACT_APP_IDFM_API_KEY\r\n        }\r\n      })\r\n        .then(response => response.status === 404 ? null : response.json())\r\n        .then(data => {\r\n          const departures = data?.Siri?.ServiceDelivery?.StopMonitoringDelivery[0]?.MonitoredStopVisit?.map(journey => ({\r\n            lineRef: journey?.MonitoredVehicleJourney?.LineRef?.value,\r\n            operatorRef: journey?.MonitoredVehicleJourney?.OperatorRef?.value,\r\n            stopPointName: journey?.MonitoredVehicleJourney?.MonitoredCall?.StopPointName[0]?.value,\r\n            directionName: journey?.MonitoredVehicleJourney?.DirectionName[0]?.value,\r\n            destinationName: journey?.MonitoredVehicleJourney?.DestinationName[0]?.value,\r\n            vehicleJourneyName: journey?.MonitoredVehicleJourney?.JourneyNote[0]?.value,\r\n            expectedArrivalTime: journey?.MonitoredVehicleJourney?.MonitoredCall?.ExpectedArrivalTime,\r\n            aimedArrival: journey?.MonitoredVehicleJourney?.MonitoredCall?.AimedArrival,\r\n            expectedDepartureTime: journey?.MonitoredVehicleJourney?.MonitoredCall?.ExpectedDepartureTime,\r\n            aimedDepartureTime: journey?.MonitoredVehicleJourney?.MonitoredCall?.aimedDepartureTime,\r\n            arrivalStatus: journey?.MonitoredVehicleJourney?.MonitoredCall?.ArrivalStatus,\r\n            departureStatus: journey?.MonitoredVehicleJourney?.MonitoredCall?.DepartureStatus,\r\n            vehicleAtStop: journey?.MonitoredVehicleJourney?.MonitoredCall?.VehicleAtStop,\r\n            arrivalPlatform: journey?.MonitoredVehicleJourney?.MonitoredCall?.ArrivalPlatformName?.value,\r\n            trainNumber: journey?.MonitoredVehicleJourney?.TrainNumber?.TrainNumberRef[0]?.value,\r\n            minutesFromNow: calculateMinutesFromNow(journey?.MonitoredVehicleJourney?.MonitoredCall?.ExpectedDepartureTime || journey?.MonitoredVehicleJourney?.MonitoredCall?.ExpectedArrivalTime),\r\n          }));\r\n\r\n          setData(departures.sort((a, b) => a.minutesFromNow - b.minutesFromNow));\r\n        })\r\n        .catch(error => console.error(error));\r\n    };\r\n\r\n    fetchData(url, setTrainData, setStatus);\r\n    const intervalId = setInterval(() => fetchData(url, setTrainData, setStatus), 2000);\r\n    return () => clearInterval(intervalId);\r\n  }, []);\r\n\r\n  if (status === 'NO_REALTIME_SCHEDULES_FOUND') {\r\n    return <div className=\"flex items-center justify-center text-center text-xs lg:text-base bg-white dark:bg-gray-700 dark:text-gray-200 rounded-lg shadow-md p-4 mb-3 h-[44px] lg:h-[72px]\"><p className='animate-pulse'>Information en direct indisponible</p></div>;\r\n  }\r\n\r\n\r\n\r\n  const groupedData = trainData.reduce((acc, train) => {\r\n    const lineRef = train.lineRef;\r\n\r\n    if (!acc[lineRef]) {\r\n      acc[lineRef] = {};\r\n    }\r\n\r\n    const destination = train.destinationName;\r\n\r\n    if (!acc[lineRef][destination]) {\r\n      acc[lineRef][destination] = [];\r\n    }\r\n\r\n    acc[lineRef][destination].push(train);\r\n\r\n    return acc;\r\n  }, {});\r\n\r\n  // Afficher les départs de train groupés par ligne et destination\r\n  return (\r\n    <div className=\"\">\r\n      {Object.entries(groupedData).map(([lineRef, destinations]) => (\r\n        <div key={lineRef}>\r\n\r\n          {Object.entries(destinations).sort(([a], [b]) => a.localeCompare(b)).map(([destination, trains]) => (\r\n\r\n            <div key={destination} className=\"flex flex-col justify-start gap-4 bg-white border-gray-400 dark:text-white dark:bg-gray-700 min-h-[44px] max-h-[72px] p-1 lg:p-4\">\r\n              <div className=\"ml-2 lg:ml-4 text-sm lg:text-base flex flex-row\">\r\n                <img src={process.env.PUBLIC_URL + `/images/${getTransportByLineID(lineRef.split(\"::\").pop().split(\":\")[0])}${localStorage.theme === 'dark' ? '_LIGHT' : ''}.svg`} alt={getTransportByLineID(lineRef.split(\"::\").pop().split(\":\")[0])} className=\"h-5 lg:h-10 mr-1\" />\r\n                <LineLogoByLineID lineID={lineRef.split(\"::\").pop().split(\":\")[0]} className=\"h-5 lg:h-10\" />\r\n\r\n                <p className='ml-2'>{destination}</p>\r\n              </div>\r\n              <div className=\"space-x-2\">\r\n                {trains.map((train, index) => (\r\n                  <>\r\n                    <span key={index} className={`text-sm lg:text-2xl font-bold text-green-600 dark:text-green-500 ${train.minutesFromNow === '0' ? 'animate-pulse' : ''}`}>\r\n                      {train.minutesFromNow}<span className=\"text-xs lg:text-lg\">ᵐⁱⁿ</span>\r\n                    </span>\r\n                  </>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TrainInfo;\r\n","import { createElementObject, createPathComponent, extendContext } from '@react-leaflet/core';\nimport { GeoJSON as LeafletGeoJSON } from 'leaflet';\nexport const GeoJSON = createPathComponent(function createGeoJSON({ data , ...options }, ctx) {\n    const geoJSON = new LeafletGeoJSON(data, options);\n    return createElementObject(geoJSON, extendContext(ctx, {\n        overlayContainer: geoJSON\n    }));\n}, function updateGeoJSON(layer, props, prevProps) {\n    if (props.style !== prevProps.style) {\n        if (props.style == null) {\n            layer.resetStyle();\n        } else {\n            layer.setStyle(props.style);\n        }\n    }\n});\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents, useMap } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport TrainInfo from '../components/Timing4';\r\nimport tracesDuReseauFerre from '../data/traces-du-reseau-ferre-idf.json';\r\nimport { GeoJSON } from 'react-leaflet';\r\nimport arretsLignes from '../data/arrets-lignes.json';\r\n\r\nconst Location = () => {\r\n    const [initialPosition, setInitialPosition] = useState(null);\r\n    const [stopAreas, setStopAreas] = useState('');\r\n    const mapRef = useRef();\r\n\r\n    const CenterMarker = () => {\r\n        const [position, setPosition] = useState(null);\r\n        useMapEvents({\r\n            moveend: (e) => {\r\n                const newPos = e.target.getCenter();\r\n                setPosition(newPos);\r\n            }\r\n        });\r\n\r\n        useEffect(() => {\r\n            if (position) {\r\n                const fetchData = async () => {\r\n                    const response = await fetch(`https://prim.iledefrance-mobilites.fr/marketplace/navitia/coverage/fr-idf/coord/${position.lng};${position.lat}/stop_areas?distance=400`, {\r\n                        headers: {\r\n                            'apikey': process.env.REACT_APP_IDFM_API_KEY\r\n                        }\r\n                    });\r\n                    const data = await response.json();\r\n                    console.log(data);\r\n                    setStopAreas(data.stop_areas);\r\n                };\r\n                fetchData();\r\n            }\r\n        }, [position]);\r\n\r\n        return null;\r\n    };\r\n\r\n    const MiddleMarker = () => {\r\n        return (\r\n            <span className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[1000] bg-violet-700 rounded-full p-2 border-4 border-white\" />\r\n        )\r\n    };\r\n\r\n    useEffect(() => {\r\n        navigator.geolocation.getCurrentPosition((position) => {\r\n            setInitialPosition([position.coords.latitude, position.coords.longitude]);\r\n        }, (error) => {\r\n            console.error(\"Error occurred while getting geolocation: \", error);\r\n            if (!initialPosition) {\r\n                setInitialPosition([48.8598, 2.3470]);\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    const RecenterControl = () => {\r\n        const map = useMap();\r\n\r\n        useEffect(() => {\r\n            const control = new L.Control({ position: 'bottomright' });\r\n\r\n            control.onAdd = () => {\r\n                const button = L.DomUtil.create('button', 'leaflet-bar leaflet-control leaflet-control-custom');\r\n                button.innerHTML = '<svg class=\"w-4 h-4\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 14 20\"><path d=\"M7 0a7 7 0 0 0-1 13.92V19a1 1 0 1 0 2 0v-5.08A7 7 0 0 0 7 0Zm0 5.5A1.5 1.5 0 0 0 5.5 7a1 1 0 0 1-2 0A3.5 3.5 0 0 1 7 3.5a1 1 0 0 1 0 2Z\"/></svg>';\r\n                button.style.cssText = 'background-color: white; padding: 6px; cursor: pointer;';\r\n                button.onclick = () => initialPosition && map.flyTo(initialPosition, 13);\r\n                return button;\r\n            };\r\n\r\n            control.addTo(map);\r\n\r\n            return () => control.remove();\r\n        }, [map]);\r\n\r\n        return null;\r\n    };\r\n\r\n    return (\r\n        <div style={{ height: 'calc(100vh - 130px)' }}>\r\n            {initialPosition && (\r\n                <MapContainer className=\"h-[40%]\" whenCreated={setMapInstance => { mapRef.current = setMapInstance; }} center={initialPosition} zoom={13} attributionControl={false} zoomControl={false}>\r\n                    <TileLayer url={`https://{s}.tile.jawg.io/jawg-streets/{z}/{x}/{y}{r}.png?access-token=${process.env.REACT_APP_JAWG_API_KEY}`} />\r\n                    <CenterMarker />\r\n                    <RecenterControl />\r\n                    <MiddleMarker />\r\n                    {tracesDuReseauFerre.map((line, index) => (\r\n                        line.fields && line.fields.geo_shape && line.fields.geo_shape.coordinates ? (\r\n                            <GeoJSON key={index} data={{\r\n                                type: \"LineString\",\r\n                                coordinates: line.fields.geo_shape.coordinates\r\n                            }} style={{ color: '#' + line.fields.colourweb_hexa }} />\r\n                        ) : null\r\n                    ))}\r\n\r\n                </MapContainer>\r\n            )}\r\n            {stopAreas && (\r\n                <div className=\"h-[60%] overflow-y-scroll\">\r\n                    <div className=\"space-y-4 border\">\r\n                        {stopAreas.map((stopArea, index) => (\r\n                            <>\r\n                                <h1 className=\"inline-block text-white bg-blue-900 p-2\">{stopArea.name}</h1>\r\n                                <TrainInfo key={stopArea.id} line={null} stationName={stopArea.id.split(':').pop()} />\r\n                            </>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Location;"],"names":["_ref","lineID","stationName","_useState","useState","_useState2","_slicedToArray","trainData","setTrainData","_useState3","_useState4","status","_useState5","_useState6","_useState7","_useState8","url","concat","useEffect","fetchData","setData","setStatus","fetch","headers","process","then","response","json","data","_data$Siri","_data$Siri$ServiceDel","_data$Siri$ServiceDel2","_data$Siri$ServiceDel3","departures","Siri","ServiceDelivery","StopMonitoringDelivery","MonitoredStopVisit","map","journey","_journey$MonitoredVeh","_journey$MonitoredVeh2","_journey$MonitoredVeh3","_journey$MonitoredVeh4","_journey$MonitoredVeh5","_journey$MonitoredVeh6","_journey$MonitoredVeh7","_journey$MonitoredVeh8","_journey$MonitoredVeh9","_journey$MonitoredVeh10","_journey$MonitoredVeh11","_journey$MonitoredVeh12","_journey$MonitoredVeh13","_journey$MonitoredVeh14","_journey$MonitoredVeh15","_journey$MonitoredVeh16","_journey$MonitoredVeh17","_journey$MonitoredVeh18","_journey$MonitoredVeh19","_journey$MonitoredVeh20","_journey$MonitoredVeh21","_journey$MonitoredVeh22","_journey$MonitoredVeh23","_journey$MonitoredVeh24","_journey$MonitoredVeh25","_journey$MonitoredVeh26","_journey$MonitoredVeh27","_journey$MonitoredVeh28","_journey$MonitoredVeh29","_journey$MonitoredVeh30","_journey$MonitoredVeh31","_journey$MonitoredVeh32","_journey$MonitoredVeh33","_journey$MonitoredVeh34","_journey$MonitoredVeh35","_journey$MonitoredVeh36","_journey$MonitoredVeh37","time","lineRef","MonitoredVehicleJourney","LineRef","value","operatorRef","OperatorRef","stopPointName","MonitoredCall","StopPointName","directionName","DirectionName","destinationName","DestinationName","vehicleJourneyName","JourneyNote","expectedArrivalTime","ExpectedArrivalTime","aimedArrival","AimedArrival","expectedDepartureTime","ExpectedDepartureTime","aimedDepartureTime","arrivalStatus","ArrivalStatus","departureStatus","DepartureStatus","vehicleAtStop","VehicleAtStop","arrivalPlatform","ArrivalPlatformName","trainNumber","TrainNumber","TrainNumberRef","minutesFromNow","Math","floor","Date","sort","a","b","catch","error","console","intervalId","setInterval","clearInterval","_jsx","className","children","groupedData","reduce","acc","train","destination","push","Object","entries","_ref2","_ref3","destinations","_ref4","_ref5","localeCompare","_ref8","_ref9","trains","_jsxs","src","getTransportByLineID","split","pop","localStorage","theme","alt","LineLogoByLineID","index","_Fragment","GeoJSON","createPathComponent","ctx","options","_objectWithoutProperties","_excluded","geoJSON","LeafletGeoJSON","createElementObject","extendContext","overlayContainer","layer","props","prevProps","style","resetStyle","setStyle","initialPosition","setInitialPosition","stopAreas","setStopAreas","mapRef","useRef","CenterMarker","position","setPosition","useMapEvents","moveend","e","newPos","target","getCenter","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","lng","lat","sent","log","stop_areas","stop","apply","arguments","MiddleMarker","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","RecenterControl","useMap","control","L","onAdd","button","create","innerHTML","cssText","onclick","flyTo","addTo","remove","height","MapContainer","whenCreated","setMapInstance","current","center","zoom","attributionControl","zoomControl","TileLayer","tracesDuReseauFerre","line","fields","geo_shape","coordinates","type","color","colourweb_hexa","stopArea","name","TrainInfo","id"],"sourceRoot":""}