"use strict";(self.webpackChunkrailtime_idf=self.webpackChunkrailtime_idf||[]).push([[761],{8171:function(e,r,i){var n=i(9867),l=i(5644),t=i(9790),o=i(2834);r.Z=function(e){var r=e.lineID,i=e.stationID,a=(0,n.useRef)(null);return(0,n.useEffect)((function(){var e=function(){var e=a.current.classList;e.toggle("flex-col",a.current.offsetWidth<=200),e.toggle("sm:flex-row",a.current.offsetWidth>200)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),(0,o.jsxs)("nav",{className:"flex sm:flex-row h-10 pl-4 bg-white dark:bg-gray-800 dark:text-white border-b border-gray-700 dark:border-gray-400",ref:a,"aria-label":"Breadcrumb",children:[(0,o.jsx)("ol",{className:"inline-flex items-center space-x-1 md:space-x-3 flex-none",children:r&&(0,o.jsx)("li",{children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("svg",{className:"w-3 h-3 text-gray-400 xl:mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:(0,o.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"})}),(0,o.jsx)(l.rU,{to:"/line/".concat(r),className:"mx-1 text-xs lg:text-sm font-medium hover:text-blue-600 md:ml-2",children:(0,t.Zd)(r)}),i&&(0,o.jsx)("svg",{className:"w-3 h-3 text-gray-400 xl:mx-1 mr-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:(0,o.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"})})]})})}),i&&(0,o.jsx)("ol",{className:"inline-flex items-center space-x-1 md:space-x-3 w-full sm:w-auto",children:(0,o.jsx)("li",{"aria-current":"page",children:(0,o.jsx)("div",{className:"flex items-center",children:(0,o.jsx)(l.rU,{to:"/station/".concat(i),className:"text-xs lg:text-sm font-medium text-gray-500 hover:text-blue-600 md:ml-2 line-clamp-1",children:(0,t.zj)(i)})})})})]})}},5236:function(e,r,i){i.d(r,{Z:function(){return v}});var n=i(4165),l=i(5861),t=i(9439),o=i(9867),a=i(4189),d=i(4670),s=i(2834),u=function(){var e=(0,o.useState)(!1),r=(0,t.Z)(e,2),i=r[0],n=r[1];return(0,s.jsx)("button",{onClick:function(){n(!i)},"aria-label":i?"Remove from favorites":"Add to favorites",children:i?(0,s.jsx)("svg",{class:"w-3 h-3 lg:w-5 lg:h-5 text-gray-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 14 20",children:(0,s.jsx)("path",{d:"M13 20a1 1 0 0 1-.64-.231L7 15.3l-5.36 4.469A1 1 0 0 1 0 19V2a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v17a1 1 0 0 1-1 1Z"})}):(0,s.jsx)("svg",{class:"w-3 h-3 lg:w-5 lg:h-5 text-gray-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 4 15",children:(0,s.jsx)("path",{d:"M3.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 6.041a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 5.959a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})})})},c=i(9790);var v=function(e){var r,i,v,m,x=e.lineID,h=e.stationID,g=(0,d.s0)(),p=(0,o.useState)([]),f=(0,t.Z)(p,2),w=f[0],b=f[1],y=(0,o.useState)(!1),j=(0,t.Z)(y,2),N=j[0],M=j[1];(0,o.useEffect)((function(){var e=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var r,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.c)();case 2:r=e.sent,i=r.disruptedLines,b(i);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var k=w.some((function(e){return e.lineId==="line:IDFM:"+x&&!0===e.disrupted}));return(0,s.jsxs)("div",{className:"flex items-center bg-white dark:bg-gray-800 dark:text-white border-gray-900 dark:border-gray-800 border-solid border p-2 lg:p-4 mb-2 lg:mb-4 rounded-b-lg shadow-md min-h-[52px]",onMouseEnter:function(){return M(!0)},onMouseLeave:function(){return M(!1)},children:[k&&(0,s.jsxs)("span",{className:"relative",children:[N&&(0,s.jsxs)("div",{"data-popover":!0,id:"popover-top",role:"tooltip",className:"absolute z-10 inline-block w-40 lg:w-80 text-sm text-gray-500 transition-opacity duration-300 bg-white border border-gray-200 rounded-lg shadow-sm opacity-100 dark:text-gray-400 dark:border-gray-600 dark:bg-gray-800",children:[(0,s.jsx)("div",{className:"px-3 py-2 bg-gray-100 border-b border-gray-200 rounded-t-lg dark:border-gray-600 dark:bg-gray-700 flex flex-row",children:(0,s.jsx)("h3",{className:"flex-grow font-semibold text-gray-900 dark:text-white",children:null===(r=w.find((function(e){return e.lineId==="line:IDFM:"+x})))||void 0===r?void 0:r.disruption.cause})}),(0,s.jsxs)("div",{className:"px-3 py-2",children:[(0,s.jsx)("p",{children:null===(i=w.find((function(e){return e.lineId==="line:IDFM:"+x})))||void 0===i?void 0:i.disruption.title}),(0,s.jsxs)("a",{class:"bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 hover:dark:bg-gray-600 font-medium rounded-lg text-xs px-3 mt-3 text-center inline-flex items-center cursor-pointer",onClick:function(){g("/line/".concat(x))},children:[(0,s.jsx)("svg",{class:"-ml-0.5 mr-2 h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 14",children:(0,s.jsx)("path",{d:"M10 0C4.612 0 0 5.336 0 7c0 1.742 3.546 7 10 7 6.454 0 10-5.258 10-7 0-1.664-4.612-7-10-7Zm0 10a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z"})}),"En savoir plus"]})]})]}),(0,s.jsx)("span",{className:"absolute top-[-1rem] right-[-0.4rem] lg:top-[-1.8rem] lg:right-[-0.7rem]",children:(0,s.jsxs)("span",{className:"relative flex h-3 w-3 lg:h-5 lg:w-5",children:[(0,s.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full opacity-75 ".concat("BLOQUANTE"===(null===(v=w.find((function(e){return e.lineId==="line:IDFM:"+x})))||void 0===v?void 0:v.disruption.severity)?"bg-red-600":"bg-yellow-400")}),(0,s.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 lg:h-5 lg:w-5 ".concat("BLOQUANTE"===(null===(m=w.find((function(e){return e.lineId==="line:IDFM:"+x})))||void 0===m?void 0:m.disruption.severity)?"bg-red-600":"bg-yellow-400")})]})})]}),(0,s.jsx)("img",{src:"/IDF-Timing-Now"+"/images/".concat((0,c.tX)(x)).concat("dark"===localStorage.theme?"_LIGHT":"",".svg"),alt:(0,c.tX)(x),className:"h-5 lg:h-10 mr-1"}),(0,s.jsx)(c.BU,{lineID:x,className:"h-5 lg:h-10 mr-2 lg:mr-4"}),(0,s.jsx)("p",{className:"text-xs lg:text-base font-medium flex-grow line-clamp-2",children:(0,c.zj)(h)}),(0,s.jsx)("p",{className:"text-slate-400 text-xs font-bold pr-0.5 lg:pr-2",children:(0,s.jsx)(u,{})})]})}},7761:function(e,r,i){i.r(r),i.d(r,{default:function(){return s}});var n=i(9439),l=i(4670),t=i(9867),o=(i(5236),i(9790)),a=(i(9673),i(2834));var d=function(e){e.lineID;var r=e.stationName,i=(0,t.useState)([]),l=(0,n.Z)(i,2),d=l[0],s=l[1],u=(0,t.useState)(""),c=(0,n.Z)(u,2),v=c[0],m=(c[1],(0,t.useState)("current")),x=(0,n.Z)(m,2),h=(x[0],x[1],(0,t.useState)(null)),g=(0,n.Z)(h,2),p=(g[0],g[1],"https://prim.iledefrance-mobilites.fr/marketplace/stop-monitoring?MonitoringRef=STIF:StopArea:SP:".concat(r,":"));if((0,t.useEffect)((function(){var e=function(e,r,i){fetch(e,{headers:{Accept:"application/json",apikey:"l5iC8ZUjTN6WAevyFkU1tV8zkTbmNdjb"}}).then((function(e){return 404===e.status?null:e.json()})).then((function(e){var i,n,l,t,o=null===e||void 0===e||null===(i=e.Siri)||void 0===i||null===(n=i.ServiceDelivery)||void 0===n||null===(l=n.StopMonitoringDelivery[0])||void 0===l||null===(t=l.MonitoredStopVisit)||void 0===t?void 0:t.map((function(e){var r,i,n,l,t,o,a,d,s,u,c,v,m,x,h,g,p,f,w,b,y,j,N,M,k,D,I,S,Z,C,V,T,J,A,E,L,F,U;return{lineRef:null===e||void 0===e||null===(r=e.MonitoredVehicleJourney)||void 0===r||null===(i=r.LineRef)||void 0===i?void 0:i.value,operatorRef:null===e||void 0===e||null===(n=e.MonitoredVehicleJourney)||void 0===n||null===(l=n.OperatorRef)||void 0===l?void 0:l.value,stopPointName:null===e||void 0===e||null===(t=e.MonitoredVehicleJourney)||void 0===t||null===(o=t.MonitoredCall)||void 0===o||null===(a=o.StopPointName[0])||void 0===a?void 0:a.value,directionName:null===e||void 0===e||null===(d=e.MonitoredVehicleJourney)||void 0===d||null===(s=d.DirectionName[0])||void 0===s?void 0:s.value,destinationName:null===e||void 0===e||null===(u=e.MonitoredVehicleJourney)||void 0===u||null===(c=u.DestinationName[0])||void 0===c?void 0:c.value,vehicleJourneyName:null===e||void 0===e||null===(v=e.MonitoredVehicleJourney)||void 0===v||null===(m=v.JourneyNote[0])||void 0===m?void 0:m.value,expectedArrivalTime:null===e||void 0===e||null===(x=e.MonitoredVehicleJourney)||void 0===x||null===(h=x.MonitoredCall)||void 0===h?void 0:h.ExpectedArrivalTime,aimedArrival:null===e||void 0===e||null===(g=e.MonitoredVehicleJourney)||void 0===g||null===(p=g.MonitoredCall)||void 0===p?void 0:p.AimedArrival,expectedDepartureTime:null===e||void 0===e||null===(f=e.MonitoredVehicleJourney)||void 0===f||null===(w=f.MonitoredCall)||void 0===w?void 0:w.ExpectedDepartureTime,aimedDepartureTime:null===e||void 0===e||null===(b=e.MonitoredVehicleJourney)||void 0===b||null===(y=b.MonitoredCall)||void 0===y?void 0:y.aimedDepartureTime,arrivalStatus:null===e||void 0===e||null===(j=e.MonitoredVehicleJourney)||void 0===j||null===(N=j.MonitoredCall)||void 0===N?void 0:N.ArrivalStatus,departureStatus:null===e||void 0===e||null===(M=e.MonitoredVehicleJourney)||void 0===M||null===(k=M.MonitoredCall)||void 0===k?void 0:k.DepartureStatus,vehicleAtStop:null===e||void 0===e||null===(D=e.MonitoredVehicleJourney)||void 0===D||null===(I=D.MonitoredCall)||void 0===I?void 0:I.VehicleAtStop,arrivalPlatform:null===e||void 0===e||null===(S=e.MonitoredVehicleJourney)||void 0===S||null===(Z=S.MonitoredCall)||void 0===Z||null===(C=Z.ArrivalPlatformName)||void 0===C?void 0:C.value,trainNumber:null===e||void 0===e||null===(V=e.MonitoredVehicleJourney)||void 0===V||null===(T=V.TrainNumber)||void 0===T||null===(J=T.TrainNumberRef[0])||void 0===J?void 0:J.value,minutesFromNow:(U=(null===e||void 0===e||null===(A=e.MonitoredVehicleJourney)||void 0===A||null===(E=A.MonitoredCall)||void 0===E?void 0:E.ExpectedDepartureTime)||(null===e||void 0===e||null===(L=e.MonitoredVehicleJourney)||void 0===L||null===(F=L.MonitoredCall)||void 0===F?void 0:F.ExpectedArrivalTime),Math.floor((new Date(U)-new Date)/6e4))}}));r(o.sort((function(e,r){return e.minutesFromNow-r.minutesFromNow})))})).catch((function(e){return console.error(e)}))};e(p,s);var r=setInterval((function(){return e(p,s)}),2e3);return function(){return clearInterval(r)}}),[]),"NO_REALTIME_SCHEDULES_FOUND"===v)return(0,a.jsx)("div",{className:"flex items-center justify-center text-center text-xs lg:text-base bg-white dark:bg-gray-700 dark:text-gray-200 rounded-lg shadow-md p-4 mb-3 h-[44px] lg:h-[72px]",children:(0,a.jsx)("p",{className:"animate-pulse",children:"Information en direct indisponible"})});var f=d.reduce((function(e,r){var i=r.lineRef;e[i]||(e[i]={});var n=r.destinationName;return e[i][n]||(e[i][n]=[]),e[i][n].push(r),e}),{});return(0,a.jsx)("div",{className:"",children:Object.entries(f).map((function(e){var r=(0,n.Z)(e,2),i=r[0],l=r[1];return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)("img",{src:"/IDF-Timing-Now"+"/images/".concat((0,o.tX)(i.split("::").pop().split(":")[0])).concat("dark"===localStorage.theme?"_LIGHT":"",".svg"),alt:(0,o.tX)(i.split("::").pop().split(":")[0]),className:"h-5 lg:h-10 mr-1"}),(0,a.jsx)(o.BU,{lineID:i.split("::").pop().split(":")[0],className:"h-5 lg:h-10"})]}),Object.entries(l).sort((function(e,r){var i=(0,n.Z)(e,1)[0],l=(0,n.Z)(r,1)[0];return i.localeCompare(l)})).map((function(e){var r=(0,n.Z)(e,2),i=r[0],l=r[1];return(0,a.jsxs)("div",{className:"flex items-center bg-white border-gray-400 dark:text-white dark:bg-gray-700 min-h-[44px] max-h-[72px] p-1 lg:p-4",children:[(0,a.jsx)("div",{className:"ml-2 lg:ml-4 text-sm lg:text-base",children:(0,a.jsx)("p",{children:i})}),(0,a.jsx)("div",{className:"ml-auto",children:l.map((function(e,r){return(0,a.jsxs)("span",{className:"mr-2 text-sm lg:text-base bg-gray-800 text-yellow-500 rounded py-2 px-2",children:[e.minutesFromNow,"m"]},r)}))})]},i)}))]},i)}))})};i(8171);var s=function(){var e=(0,l.UO)().stationID,r=(0,t.useState)([]),i=(0,n.Z)(r,2),o=i[0];return i[1],(0,a.jsx)("div",{className:"mx-auto ".concat(1===o.length?"grid grid-cols-1 max-w-screen-sm":"grid grid-cols-1 max-w-screen-lg"),children:(0,a.jsx)(d,{line:null,stationName:e})})}}}]);
//# sourceMappingURL=761.e2182bc0.chunk.js.map