"use strict";(self.webpackChunkrailtime_idf=self.webpackChunkrailtime_idf||[]).push([[234],{6016:function(e,l,i){var o=i(9439),n=i(9867),t=(i(1211),i(4467),i(9228),i(9673),i(9790)),r=i(2834);l.Z=function(e){e.lineID;var l=e.stationName,i=(0,n.useState)([]),a=(0,o.Z)(i,2),d=a[0],u=a[1],v=(0,n.useState)(""),c=(0,o.Z)(v,2),s=c[0],m=c[1],p="https://prim.iledefrance-mobilites.fr/marketplace/stop-monitoring?MonitoringRef=STIF:StopArea:SP:".concat(l,":");return(0,n.useEffect)((function(){var e=function(e,l,i){fetch(e,{headers:{Accept:"application/json",apikey:"l5iC8ZUjTN6WAevyFkU1tV8zkTbmNdjb"}}).then((function(e){return 404===e.status?null:e.json()})).then((function(e){var o,n,t,r,a,d=null===e||void 0===e||null===(o=e.Siri)||void 0===o||null===(n=o.ServiceDelivery)||void 0===n||null===(t=n.StopMonitoringDelivery[0])||void 0===t||null===(r=t.MonitoredStopVisit)||void 0===r||null===(a=r.filter((function(e){var l,i,o,n,t=null===e||void 0===e||null===(l=e.MonitoredVehicleJourney)||void 0===l||null===(i=l.MonitoredCall)||void 0===i?void 0:i.ExpectedDepartureTime;return!((null===e||void 0===e||null===(o=e.MonitoredVehicleJourney)||void 0===o||null===(n=o.MonitoredCall)||void 0===n?void 0:n.VehicleAtStop)&&new Date(t)<new Date)})))||void 0===a?void 0:a.map((function(e){var l,i,o,n,t,r,a,d,u,v,c,s,m,p,h,x,f,N,g,y,M,T,b,V,J,S,j,w,A,D,C,k,R,I,E,Z,F,P,L,U,$,_,O;return{lineRef:null===e||void 0===e||null===(l=e.MonitoredVehicleJourney)||void 0===l||null===(i=l.LineRef)||void 0===i?void 0:i.value,operatorRef:null===e||void 0===e||null===(o=e.MonitoredVehicleJourney)||void 0===o||null===(n=o.OperatorRef)||void 0===n?void 0:n.value,stopPointName:null===e||void 0===e||null===(t=e.MonitoredVehicleJourney)||void 0===t||null===(r=t.MonitoredCall)||void 0===r||null===(a=r.StopPointName[0])||void 0===a?void 0:a.value,directionName:null===e||void 0===e||null===(d=e.MonitoredVehicleJourney)||void 0===d||null===(u=d.DirectionName[0])||void 0===u?void 0:u.value,destinationName:null===e||void 0===e||null===(v=e.MonitoredVehicleJourney)||void 0===v||null===(c=v.DestinationName[0])||void 0===c?void 0:c.value,vehicleJourneyNote:null===e||void 0===e||null===(s=e.MonitoredVehicleJourney)||void 0===s||null===(m=s.JourneyNote[0])||void 0===m?void 0:m.value,vehicleJourneyName:(null===e||void 0===e||null===(p=e.MonitoredVehicleJourney)||void 0===p||null===(h=p.VehicleJourneyName[0])||void 0===h?void 0:h.value)||(null===e||void 0===e||null===(x=e.MonitoredVehicleJourney)||void 0===x||null===(f=x.TrainNumbers)||void 0===f||null===(N=f.TrainNumberRef[0])||void 0===N?void 0:N.value),expectedArrivalTime:null===e||void 0===e||null===(g=e.MonitoredVehicleJourney)||void 0===g||null===(y=g.MonitoredCall)||void 0===y?void 0:y.ExpectedArrivalTime,aimedArrival:null===e||void 0===e||null===(M=e.MonitoredVehicleJourney)||void 0===M||null===(T=M.MonitoredCall)||void 0===T?void 0:T.AimedArrival,expectedDepartureTime:null===e||void 0===e||null===(b=e.MonitoredVehicleJourney)||void 0===b||null===(V=b.MonitoredCall)||void 0===V?void 0:V.ExpectedDepartureTime,aimedArrivalTime:null===e||void 0===e||null===(J=e.MonitoredVehicleJourney)||void 0===J||null===(S=J.MonitoredCall)||void 0===S?void 0:S.AimedArrivalTime,arrivalStatus:null===e||void 0===e||null===(j=e.MonitoredVehicleJourney)||void 0===j||null===(w=j.MonitoredCall)||void 0===w?void 0:w.ArrivalStatus,departureStatus:null===e||void 0===e||null===(A=e.MonitoredVehicleJourney)||void 0===A||null===(D=A.MonitoredCall)||void 0===D?void 0:D.DepartureStatus,vehicleAtStop:null===e||void 0===e||null===(C=e.MonitoredVehicleJourney)||void 0===C||null===(k=C.MonitoredCall)||void 0===k?void 0:k.VehicleAtStop,arrivalPlatform:null===e||void 0===e||null===(R=e.MonitoredVehicleJourney)||void 0===R||null===(I=R.MonitoredCall)||void 0===I||null===(E=I.ArrivalPlatformName)||void 0===E?void 0:E.value,trainNumber:null===e||void 0===e||null===(Z=e.MonitoredVehicleJourney)||void 0===Z||null===(F=Z.TrainNumber)||void 0===F||null===(P=F.TrainNumberRef[0])||void 0===P?void 0:P.value,minutesFromNow:(O=(null===e||void 0===e||null===(L=e.MonitoredVehicleJourney)||void 0===L||null===(U=L.MonitoredCall)||void 0===U?void 0:U.ExpectedDepartureTime)||(null===e||void 0===e||null===($=e.MonitoredVehicleJourney)||void 0===$||null===(_=$.MonitoredCall)||void 0===_?void 0:_.ExpectedArrivalTime),Math.round((new Date(O)-new Date)/6e4))}}));l(d.sort((function(e,l){return e.minutesFromNow-l.minutesFromNow}))),i(e.nextDepartures.errorMessage)})).catch((function(e){return console.error(e)}))};e(p,u,m);var l=setInterval((function(){return e(p,u,m)}),2e3);return function(){return clearInterval(l)}}),[l]),"NO_REALTIME_SCHEDULES_FOUND"===s?(0,r.jsx)("div",{className:"flex items-center justify-center text-center text-xs lg:text-base bg-white dark:bg-gray-700 dark:text-gray-200 rounded-lg shadow-md p-4 mb-3 h-[44px] lg:h-[72px]",children:(0,r.jsx)("p",{className:"animate-pulse",children:"Information en direct indisponible"})}):(0,r.jsx)("div",{className:"space-y-2 m-2",children:d.map((function(e,l){return(0,r.jsxs)("div",{className:"flex items-center bg-white border-gray-400 dark:text-white dark:bg-gray-700 h-14 lg:h-20 p-2 lg:p-3 relative",style:{borderBottom:"4px solid #".concat((0,t.$Z)(e.lineRef.replace(/:$/,"").split(":").pop()))},children:[(0,r.jsxs)("div",{className:"text-sm lg:text-base flex flex-row",children:[(0,r.jsx)("img",{src:"/IDF-Timing-Now"+"/images/".concat((0,t.tX)(e.lineRef.replace(/:$/,"").split(":").pop())).concat("dark"===localStorage.theme?"_LIGHT":"",".svg"),alt:(0,t.tX)(e.lineRef.replace(/:$/,"").split(":").pop()),className:"h-5 lg:h-10 mr-1"}),(0,r.jsx)(t.BU,{lineID:e.lineRef.replace(/:$/,"").split(":").pop(),className:"h-5 lg:h-10"})]}),(0,r.jsxs)("div",{className:"text-[8px] lg:text-xs flex flex-col items-center justify-center w-12 lg:w-20",children:[(0,r.jsx)("h3",{children:e.vehicleJourneyNote}),(0,r.jsx)("h3",{children:e.vehicleJourneyName})]}),(0,r.jsx)("div",{className:"flex-grow overflow-hidden",children:(0,r.jsx)("h2",{className:"font-bold text-[11px] lg:text-lg line-clamp-2 ".concat(e.expectedArrivalTime&&!e.expectedDepartureTime?"text-gray-500":""),children:e.destinationName})}),("onTime"!==e.ArrivalStatus||"onTime"!==e.departureStatus||e.expectedArrivalTime&&!e.expectedDepartureTime)&&(0,r.jsxs)("div",{className:"px-2 py-1 rounded-full text-xs lg:text-base text-white",children:[e.expectedArrivalTime&&!e.expectedDepartureTime?" (Terminus)":"","onTime"!==e.ArrivalStatus?e.ArrivalStatus:""," ","onTime"!==e.departureStatus?e.departureStatus:""]}),(0,r.jsx)("div",{className:"text-xs lg:text-base",children:e.arrivalPlatform?"Voie ".concat(e.arrivalPlatform):""}),(0,r.jsxs)("div",{className:"ml-1 lg:ml-5 pr-2 text-right",children:[(0,r.jsx)("p",{className:"text-sm lg:text-2xl font-bold ".concat(e.expectedArrivalTime&&!e.expectedDepartureTime?"text-gray-500":""),children:e.vehicleAtStop?"\xe0 quai":e.minutesFromNow+"\u1d50\u2071\u207f"}),(0,r.jsx)("p",{className:"text-xs lg:text-sm text-right text-gray-400 dark:text-white",children:e.expectedArrivalTime?"".concat(new Date(e.expectedArrivalTime).toLocaleTimeString()):e.expectedDepartureTime?"".concat(new Date(e.expectedDepartureTime).toLocaleTimeString()):"Pr\xe9vu | ".concat(new Date(e.aimedArrivalTime).toLocaleTimeString())})]}),(0,r.jsx)("div",{className:"absolute top-0 right-0 bottom-0 left-0 lg:left-0 bg-gradient-to-r from-transparent to-white dark:to-gray-700",style:{backgroundImage:"linear-gradient(to right, transparent, rgba(".concat(parseInt((0,t.$Z)(e.lineRef.replace(/:$/,"").split(":").pop()).slice(0,2),16),", ").concat(parseInt((0,t.$Z)(e.lineRef.replace(/:$/,"").split(":").pop()).slice(2,4),16),", ").concat(parseInt((0,t.$Z)(e.lineRef.replace(/:$/,"").split(":").pop()).slice(4,6),16),", 0.1))")}})]},l)}))})}},2814:function(e,l,i){var o=i(9439),n=i(9867),t=i(9790),r=(i(9673),i(2834));l.Z=function(e){e.lineID;var l=e.stationName,i=(0,n.useState)([]),a=(0,o.Z)(i,2),d=a[0],u=a[1],v=(0,n.useState)(""),c=(0,o.Z)(v,2),s=c[0],m=(c[1],(0,n.useState)("current")),p=(0,o.Z)(m,2),h=(p[0],p[1],(0,n.useState)(null)),x=(0,o.Z)(h,2),f=(x[0],x[1],"https://prim.iledefrance-mobilites.fr/marketplace/stop-monitoring?MonitoringRef=STIF:StopArea:SP:".concat(l,":"));if((0,n.useEffect)((function(){var e=function(e,l,i){fetch(e,{headers:{Accept:"application/json",apikey:"l5iC8ZUjTN6WAevyFkU1tV8zkTbmNdjb"}}).then((function(e){return 404===e.status?null:e.json()})).then((function(e){var i,o,n,t,r,a=null===e||void 0===e||null===(i=e.Siri)||void 0===i||null===(o=i.ServiceDelivery)||void 0===o||null===(n=o.StopMonitoringDelivery[0])||void 0===n||null===(t=n.MonitoredStopVisit)||void 0===t||null===(r=t.filter((function(e){var l,i,o,n,t=null===e||void 0===e||null===(l=e.MonitoredVehicleJourney)||void 0===l||null===(i=l.MonitoredCall)||void 0===i?void 0:i.ExpectedDepartureTime;return!((null===e||void 0===e||null===(o=e.MonitoredVehicleJourney)||void 0===o||null===(n=o.MonitoredCall)||void 0===n?void 0:n.VehicleAtStop)&&new Date(t)<new Date)})))||void 0===r?void 0:r.map((function(e){var l,i,o,n,t,r,a,d,u,v,c,s,m,p,h,x,f,N,g,y,M,T,b,V,J,S,j,w,A,D,C,k,R,I,E,Z,F,P,L,U,$,_,O;return{lineRef:null===e||void 0===e||null===(l=e.MonitoredVehicleJourney)||void 0===l||null===(i=l.LineRef)||void 0===i?void 0:i.value,operatorRef:null===e||void 0===e||null===(o=e.MonitoredVehicleJourney)||void 0===o||null===(n=o.OperatorRef)||void 0===n?void 0:n.value,stopPointName:null===e||void 0===e||null===(t=e.MonitoredVehicleJourney)||void 0===t||null===(r=t.MonitoredCall)||void 0===r||null===(a=r.StopPointName[0])||void 0===a?void 0:a.value,directionName:null===e||void 0===e||null===(d=e.MonitoredVehicleJourney)||void 0===d||null===(u=d.DirectionName[0])||void 0===u?void 0:u.value,destinationName:null===e||void 0===e||null===(v=e.MonitoredVehicleJourney)||void 0===v||null===(c=v.DestinationName[0])||void 0===c?void 0:c.value,vehicleJourneyNote:null===e||void 0===e||null===(s=e.MonitoredVehicleJourney)||void 0===s||null===(m=s.JourneyNote[0])||void 0===m?void 0:m.value,vehicleJourneyName:(null===e||void 0===e||null===(p=e.MonitoredVehicleJourney)||void 0===p||null===(h=p.VehicleJourneyName[0])||void 0===h?void 0:h.value)||(null===e||void 0===e||null===(x=e.MonitoredVehicleJourney)||void 0===x||null===(f=x.TrainNumbers)||void 0===f||null===(N=f.TrainNumberRef[0])||void 0===N?void 0:N.value),expectedArrivalTime:null===e||void 0===e||null===(g=e.MonitoredVehicleJourney)||void 0===g||null===(y=g.MonitoredCall)||void 0===y?void 0:y.ExpectedArrivalTime,aimedArrival:null===e||void 0===e||null===(M=e.MonitoredVehicleJourney)||void 0===M||null===(T=M.MonitoredCall)||void 0===T?void 0:T.AimedArrival,expectedDepartureTime:null===e||void 0===e||null===(b=e.MonitoredVehicleJourney)||void 0===b||null===(V=b.MonitoredCall)||void 0===V?void 0:V.ExpectedDepartureTime,aimedArrivalTime:null===e||void 0===e||null===(J=e.MonitoredVehicleJourney)||void 0===J||null===(S=J.MonitoredCall)||void 0===S?void 0:S.AimedArrivalTime,arrivalStatus:null===e||void 0===e||null===(j=e.MonitoredVehicleJourney)||void 0===j||null===(w=j.MonitoredCall)||void 0===w?void 0:w.ArrivalStatus,departureStatus:null===e||void 0===e||null===(A=e.MonitoredVehicleJourney)||void 0===A||null===(D=A.MonitoredCall)||void 0===D?void 0:D.DepartureStatus,vehicleAtStop:null===e||void 0===e||null===(C=e.MonitoredVehicleJourney)||void 0===C||null===(k=C.MonitoredCall)||void 0===k?void 0:k.VehicleAtStop,arrivalPlatform:null===e||void 0===e||null===(R=e.MonitoredVehicleJourney)||void 0===R||null===(I=R.MonitoredCall)||void 0===I||null===(E=I.ArrivalPlatformName)||void 0===E?void 0:E.value,trainNumber:null===e||void 0===e||null===(Z=e.MonitoredVehicleJourney)||void 0===Z||null===(F=Z.TrainNumber)||void 0===F||null===(P=F.TrainNumberRef[0])||void 0===P?void 0:P.value,minutesFromNow:(O=(null===e||void 0===e||null===(L=e.MonitoredVehicleJourney)||void 0===L||null===(U=L.MonitoredCall)||void 0===U?void 0:U.ExpectedDepartureTime)||(null===e||void 0===e||null===($=e.MonitoredVehicleJourney)||void 0===$||null===(_=$.MonitoredCall)||void 0===_?void 0:_.ExpectedArrivalTime),Math.floor((new Date(O)-new Date)/6e4))}}));l(a.sort((function(e,l){return e.minutesFromNow-l.minutesFromNow})))})).catch((function(e){return console.error(e)}))};e(f,u);var l=setInterval((function(){return e(f,u)}),2e3);return function(){return clearInterval(l)}}),[]),"NO_REALTIME_SCHEDULES_FOUND"===s)return(0,r.jsx)("div",{className:"flex items-center justify-center text-center text-xs lg:text-base bg-white dark:bg-gray-700 dark:text-gray-200 rounded-lg shadow-md p-4 mb-3 h-[44px] lg:h-[72px]",children:(0,r.jsx)("p",{className:"animate-pulse",children:"Information en direct indisponible"})});var N=d.reduce((function(e,l){var i=l.lineRef;e[i]||(e[i]={});var o=l.destinationName;return e[i][o]||(e[i][o]=[]),e[i][o].push(l),e}),{});return(0,r.jsx)("div",{className:"",children:Object.entries(N).map((function(e){var l=(0,o.Z)(e,2),i=l[0],n=l[1];return(0,r.jsxs)("div",{className:"flex border-b-4 border-slate-800",children:[(0,r.jsxs)("div",{className:"flex items-start justify-center w-20 lg:w-32 mt-2 lg:mt-1.5",children:[(0,r.jsx)("img",{src:"/IDF-Timing-Now"+"/images/".concat((0,t.tX)(i.split("::").pop().split(":")[0])).concat("dark"===localStorage.theme?"_LIGHT":"",".svg"),alt:(0,t.tX)(i.split("::").pop().split(":")[0]),className:"h-6 lg:h-8 mr-1"}),(0,r.jsx)(t.BU,{lineID:i.split("::").pop().split(":")[0],className:"h-6 lg:h-8"})]}),(0,r.jsx)("div",{className:"flex flex-col justify-start w-full",children:Object.entries(n).sort((function(e,l){var i=(0,o.Z)(e,1)[0],n=(0,o.Z)(l,1)[0];return i.localeCompare(n)})).map((function(e,l,i){var n=(0,o.Z)(e,2),t=n[0],a=n[1];return(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white border-gray-400 dark:text-white dark:bg-gray-700 h-11 text-sm space-x-2 p-1 lg:p-4 ".concat(l<i.length-1?"border-b":""),children:[(0,r.jsx)("p",{className:"line-clamp-2",children:t}),(0,r.jsx)("div",{className:"flex space-x-2 w-36 lg:w-48 overflow-auto justify-start shrink-0",children:a.map((function(e,l){return(0,r.jsx)("span",{className:"w-10 shrink-0 text-center text-sm lg:text-base font-semibold text-yellow-500 bg-slate-800 rounded p-1 ".concat("0"===e.minutesFromNow?"animate-pulse":""),children:e.minutesFromNow},l)}))})]},t)}))})]},i)}))})}},7234:function(e,l,i){i.r(l);var o=i(4670),n=i(6016),t=i(2814),r=i(2834);l.default=function(){var e=(0,o.UO)().stationID;return(0,r.jsxs)("div",{className:"absolute left-0 grid lg:grid-cols-[2fr,1fr] grid-cols-1 gap-4 w-full",children:[(0,r.jsx)(n.Z,{line:null,stationName:e}),(0,r.jsx)(t.Z,{line:null,stationName:e})]})}}}]);
//# sourceMappingURL=234.2b0e33c0.chunk.js.map