"use strict";(self.webpackChunkrailtime_idf=self.webpackChunkrailtime_idf||[]).push([[299],{2299:function(e,i,n){n.r(i),n.d(i,{default:function(){return m}});var l=n(4942),o=n(9439),r=n(9867),t=(n(9790),{cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0});function a(e){var i=function(e){if("number"===typeof e)return{value:e,unit:"px"};var i,n=(e.match(/^[0-9.]*/)||"").toString();i=n.includes(".")?parseFloat(n):parseInt(n,10);var l=(e.match(/[^0-9]*$/)||"").toString();return t[l]?{value:i,unit:l}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(i,"px.")),{value:i,unit:"px"})}(e);return"".concat(i.value).concat(i.unit)}var u=function(){return u=Object.assign||function(e){for(var i,n=1,l=arguments.length;n<l;n++)for(var o in i=arguments[n])Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);return e},u.apply(this,arguments)},d=function(e,i){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&i.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(l=Object.getOwnPropertySymbols(e);o<l.length;o++)i.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(e,l[o])&&(n[l[o]]=e[l[o]])}return n},c=function(e,i,n){var l="react-spinners-".concat(e,"-").concat(n);if("undefined"==typeof window||!window.document)return l;var o=document.createElement("style");document.head.appendChild(o);var r=o.sheet,t="\n    @keyframes ".concat(l," {\n      ").concat(i,"\n    }\n  ");return r&&r.insertRule(t,0),l}("PulseLoader","0% {transform: scale(1); opacity: 1} 45% {transform: scale(0.1); opacity: 0.7} 80% {transform: scale(1); opacity: 1}","pulse");var v=function(e){var i=e.loading,n=void 0===i||i,l=e.color,o=void 0===l?"#000000":l,t=e.speedMultiplier,v=void 0===t?1:t,s=e.cssOverride,m=void 0===s?{}:s,p=e.size,h=void 0===p?15:p,f=e.margin,y=void 0===f?2:f,x=d(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),M=u({display:"inherit"},m),b=function(e){return{backgroundColor:o,width:a(h),height:a(h),margin:a(y),borderRadius:"100%",display:"inline-block",animation:"".concat(c," ").concat(.75/v,"s ").concat(.12*e/v,"s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08)"),animationFillMode:"both"}};return n?r.createElement("span",u({style:M},x),r.createElement("span",{style:b(1)}),r.createElement("span",{style:b(2)}),r.createElement("span",{style:b(3)})):null},s=n(2834);var m=function(){var e=(0,r.useRef)(null),i=function(e){switch(e){case"onTime":return"\xe0 l'heure";case"delayed":return"retard\xe9";case"cancelled":return"supprim\xe9";default:return e}},n="474151",t=(0,r.useState)([]),a=(0,o.Z)(t,2),u=a[0],d=a[1],c=(0,r.useState)(""),m=(0,o.Z)(c,2),p=m[0],h=(m[1],"https://prim.iledefrance-mobilites.fr/marketplace/stop-monitoring?MonitoringRef=STIF:StopArea:SP:".concat(n,":"));return(0,r.useEffect)((function(){var e=function(e,i,n){fetch(e,{headers:{Accept:"application/json",apikey:"l5iC8ZUjTN6WAevyFkU1tV8zkTbmNdjb"}}).then((function(e){return 404===e.status?null:e.json()})).then((function(e){var n,o,r,t,a,u=null===e||void 0===e||null===(n=e.Siri)||void 0===n||null===(o=n.ServiceDelivery)||void 0===o||null===(r=o.StopMonitoringDelivery[0])||void 0===r||null===(t=r.MonitoredStopVisit)||void 0===t||null===(a=t.filter((function(e){var i,n,l,o,r=null===e||void 0===e||null===(i=e.MonitoredVehicleJourney)||void 0===i||null===(n=i.MonitoredCall)||void 0===n?void 0:n.ExpectedDepartureTime;return!((null===e||void 0===e||null===(l=e.MonitoredVehicleJourney)||void 0===l||null===(o=l.MonitoredCall)||void 0===o?void 0:o.VehicleAtStop)&&new Date(r)<new Date)})))||void 0===a?void 0:a.map((function(e){var i,n,o,r,t,a,u,d,c,v,s,m,p,h,f,y,x,M,b,N,g,w,S,J,V,T,A,j,C,D,k,E,O,F,R,Z,P,I,z,_,L,U,q,G,H,W,$,B;return $={lineRef:null===e||void 0===e||null===(i=e.MonitoredVehicleJourney)||void 0===i||null===(n=i.LineRef)||void 0===n?void 0:n.value,operatorRef:null===e||void 0===e||null===(o=e.MonitoredVehicleJourney)||void 0===o||null===(r=o.OperatorRef)||void 0===r?void 0:r.value,stopPointName:null===e||void 0===e||null===(t=e.MonitoredVehicleJourney)||void 0===t||null===(a=t.MonitoredCall)||void 0===a||null===(u=a.StopPointName[0])||void 0===u?void 0:u.value,directionName:null===e||void 0===e||null===(d=e.MonitoredVehicleJourney)||void 0===d||null===(c=d.DirectionName[0])||void 0===c?void 0:c.value,destinationName:null===e||void 0===e||null===(v=e.MonitoredVehicleJourney)||void 0===v||null===(s=v.DestinationName[0])||void 0===s?void 0:s.value,vehicleJourneyNote:null===e||void 0===e||null===(m=e.MonitoredVehicleJourney)||void 0===m||null===(p=m.JourneyNote[0])||void 0===p?void 0:p.value,vehicleJourneyName:(null===e||void 0===e||null===(h=e.MonitoredVehicleJourney)||void 0===h||null===(f=h.VehicleJourneyName[0])||void 0===f?void 0:f.value)||(null===e||void 0===e||null===(y=e.MonitoredVehicleJourney)||void 0===y||null===(x=y.TrainNumbers)||void 0===x||null===(M=x.TrainNumberRef[0])||void 0===M?void 0:M.value),expectedArrivalTime:null===e||void 0===e||null===(b=e.MonitoredVehicleJourney)||void 0===b||null===(N=b.MonitoredCall)||void 0===N?void 0:N.ExpectedArrivalTime,aimedArrival:null===e||void 0===e||null===(g=e.MonitoredVehicleJourney)||void 0===g||null===(w=g.MonitoredCall)||void 0===w?void 0:w.AimedArrival},(0,l.Z)($,"expectedArrivalTime",null===e||void 0===e||null===(S=e.MonitoredVehicleJourney)||void 0===S||null===(J=S.MonitoredCall)||void 0===J?void 0:J.ExpectedArrivalTime),(0,l.Z)($,"expectedDepartureTime",null===e||void 0===e||null===(V=e.MonitoredVehicleJourney)||void 0===V||null===(T=V.MonitoredCall)||void 0===T?void 0:T.ExpectedDepartureTime),(0,l.Z)($,"aimedArrivalTime",null===e||void 0===e||null===(A=e.MonitoredVehicleJourney)||void 0===A||null===(j=A.MonitoredCall)||void 0===j?void 0:j.AimedArrivalTime),(0,l.Z)($,"arrivalStatus",null===e||void 0===e||null===(C=e.MonitoredVehicleJourney)||void 0===C||null===(D=C.MonitoredCall)||void 0===D?void 0:D.ArrivalStatus),(0,l.Z)($,"departureStatus",null===e||void 0===e||null===(k=e.MonitoredVehicleJourney)||void 0===k||null===(E=k.MonitoredCall)||void 0===E?void 0:E.DepartureStatus),(0,l.Z)($,"vehicleAtStop",null===e||void 0===e||null===(O=e.MonitoredVehicleJourney)||void 0===O||null===(F=O.MonitoredCall)||void 0===F?void 0:F.VehicleAtStop),(0,l.Z)($,"arrivalPlatform",null===e||void 0===e||null===(R=e.MonitoredVehicleJourney)||void 0===R||null===(Z=R.MonitoredCall)||void 0===Z||null===(P=Z.ArrivalPlatformName)||void 0===P?void 0:P.value),(0,l.Z)($,"trainNumber",null===e||void 0===e||null===(I=e.MonitoredVehicleJourney)||void 0===I||null===(z=I.TrainNumber)||void 0===z||null===(_=z.TrainNumberRef[0])||void 0===_?void 0:_.value),(0,l.Z)($,"minutesFromNow",(B=(null===e||void 0===e||null===(L=e.MonitoredVehicleJourney)||void 0===L||null===(U=L.MonitoredCall)||void 0===U?void 0:U.ExpectedArrivalTime)||(null===e||void 0===e||null===(q=e.MonitoredVehicleJourney)||void 0===q||null===(G=q.MonitoredCall)||void 0===G?void 0:G.ExpectedDepartureTime)||(null===e||void 0===e||null===(H=e.MonitoredVehicleJourney)||void 0===H||null===(W=H.MonitoredCall)||void 0===W?void 0:W.AimedArrivalTime),Math.round((new Date(B)-new Date)/6e4))),$}));i(u.sort((function(e,i){return e.minutesFromNow-i.minutesFromNow})))})).catch((function(e){return console.error(e)}))};e(h,d);var i=setInterval((function(){return e(h,d)}),2e3);return function(){return clearInterval(i)}}),[n]),"NO_REALTIME_SCHEDULES_FOUND"===p?(0,s.jsx)("div",{className:"flex items-center justify-center text-center text-xs lg:text-base bg-white dark:bg-gray-700 dark:text-gray-200 rounded-lg shadow-md p-4 mb-3 h-[44px] lg:h-[72px]",children:(0,s.jsx)("p",{className:"animate-pulse",children:"Information en direct indisponible"})}):(0,s.jsxs)("div",{ref:e,className:"space-y-1 bg-gray-100",children:[(0,s.jsx)("button",{onClick:function(){e.current&&e.current.requestFullscreen()},children:"Go Fullscreen"}),u.map((function(e,n){return(0,s.jsxs)("div",{className:"flex items-center h-20 bg-white text-indigo-600 relative gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center w-3/5 gap-x-4 shrink-0",children:[(0,s.jsx)("div",{className:"w-20 pl-1 h-full bg-indigo-600 text-white font-semibold shrink-0",children:e.vehicleJourneyName}),(0,s.jsx)("div",{className:"text-3xl font-bold line-clamp-1",children:e.destinationName})]}),(0,s.jsxs)("div",{className:"flex items-center w-full h-full gap-2 text-5xl font-bold bg-gray-200",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center h-full min-w-[5rem] px-3 bg-black text-yellow-500",children:e.vehicleAtStop?"\xe0 quai":e.minutesFromNow<0?(0,s.jsx)(v,{color:"#eab308",size:10,speedMultiplier:.5}):0===e.minutesFromNow?"\xe0 l'approche":isNaN(e.minutesFromNow)?"":e.minutesFromNow+""}),(0,s.jsx)("div",{className:"text-3xl",children:"onTime"===e.arrivalStatus||"onTime"===e.departureStatus?"":e.expectedArrivalTime&&!e.expectedDepartureTime?"terminus":!e.expectedArrivalTime&&e.expectedDepartureTime?"d\xe9part":i(e.arrivalStatus)||i(e.departureStatus)})]})]},n)}))]})}}}]);
//# sourceMappingURL=299.3f15e73b.chunk.js.map